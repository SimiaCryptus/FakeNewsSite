{"version":3,"file":"index-D31AyYBh.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/components/layout/Header.tsx","../../src/components/layout/Footer.tsx","../../src/components/layout/Layout.tsx","../../src/config/api.config.ts","../../src/services/api.ts","../../src/services/stories.ts","../../src/hooks/useStories.ts","../../src/hooks/usePagination.ts","../../src/utils/date.ts","../../src/components/stories/StoryMeta.tsx","../../src/components/common/Badge.tsx","../../src/utils/url.ts","../../src/components/stories/StoryItem.tsx","../../src/components/common/Button.tsx","../../src/components/common/Pagination.tsx","../../src/components/common/Loading.tsx","../../src/components/common/Error.tsx","../../src/components/common/EmptyState.tsx","../../src/components/stories/StoryList.tsx","../../src/pages/Home.tsx","../../src/pages/NewStories.tsx","../../src/components/stories/StoryContent.tsx","../../src/components/comments/CommentItem.tsx","../../src/components/comments/CommentThread.tsx","../../src/components/common/LoadingInline.tsx","../../src/services/comments.ts","../../src/hooks/useComments.ts","../../src/components/comments/CommentList.tsx","../../src/components/common/LoadingPage.tsx","../../src/pages/StoryDetail.tsx","../../src/types/enums.ts","../../src/components/search/SearchForm.tsx","../../src/components/search/SearchFilters.tsx","../../src/components/search/SearchResults.tsx","../../src/hooks/useSearch.ts","../../src/pages/Search.tsx","../../src/services/users.ts","../../src/hooks/useUsers.ts","../../src/components/users/UserInfo.tsx","../../src/components/common/Card.tsx","../../src/components/users/UserStats.tsx","../../src/components/users/UserActivity.tsx","../../src/pages/UserProfile.tsx","../../src/pages/NotFound.tsx","../../src/routes/index.tsx","../../src/components/common/ErrorBoundary.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { Link, NavLink, useNavigate } from 'react-router-dom';\nimport { ROUTES } from '../../routes';\nimport './Header.css';\n\n/**\n * Application header with navigation\n */\nconst Header = () => {\n  const navigate = useNavigate();\n\n  const handleSearchSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const formData = new FormData(e.currentTarget);\n    const query = formData.get('q') as string;\n    \n    if (query.trim()) {\n      navigate(`${ROUTES.SEARCH}?q=${encodeURIComponent(query.trim())}`);\n      e.currentTarget.reset();\n    }\n  };\n\n  return (\n    <header className=\"header\">\n      <div className=\"header__container\">\n        <div className=\"header__brand\">\n          <Link to={ROUTES.HOME} className=\"header__logo\">\n            <span className=\"header__logo-icon\">üì∞</span>\n            <span className=\"header__logo-text\">News</span>\n          </Link>\n        </div>\n\n        <nav className=\"header__nav\">\n          <NavLink\n            to={ROUTES.HOME}\n            className={({ isActive }) =>\n              `header__nav-link ${isActive ? 'header__nav-link--active' : ''}`\n            }\n            end\n          >\n            Top\n          </NavLink>\n          <NavLink\n            to={ROUTES.NEW}\n            className={({ isActive }) =>\n              `header__nav-link ${isActive ? 'header__nav-link--active' : ''}`\n            }\n          >\n            New\n          </NavLink>\n          <NavLink\n            to={ROUTES.SEARCH}\n            className={({ isActive }) =>\n              `header__nav-link ${isActive ? 'header__nav-link--active' : ''}`\n            }\n          >\n            Search\n          </NavLink>\n        </nav>\n\n        <form className=\"header__search\" onSubmit={handleSearchSubmit}>\n          <input\n            type=\"search\"\n            name=\"q\"\n            placeholder=\"Search stories...\"\n            className=\"header__search-input\"\n            aria-label=\"Search stories\"\n          />\n          <button type=\"submit\" className=\"header__search-button\" aria-label=\"Submit search\">\n            üîç\n          </button>\n        </form>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;","import './Footer.css';\n\n/**\n * Application footer\n */\nconst Footer = () => {\n  const currentYear = new Date().getFullYear();\n\n  return (\n    <footer className=\"footer\">\n      <div className=\"footer__container\">\n        <div className=\"footer__content\">\n          <p className=\"footer__text\">\n            ¬© {currentYear} News App. Built with React & TypeScript.\n          </p>\n          <div className=\"footer__links\">\n            <a\n              href=\"https://github.com\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footer__link\"\n            >\n              GitHub\n            </a>\n            <span className=\"footer__separator\">‚Ä¢</span>\n            <a\n              href=\"/api\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footer__link\"\n            >\n              API Docs\n            </a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;","import { Outlet } from 'react-router-dom';\nimport Header from './Header';\nimport Footer from './Footer';\nimport './Layout.css';\n\n/**\n * Main layout component\n * Provides consistent structure across all pages\n */\nconst Layout = () => {\n  return (\n    <div className=\"layout\">\n      <Header />\n      <main className=\"layout__main\">\n        <div className=\"layout__container\">\n          <Outlet />\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Layout;","/**\n * API Configuration\n * Centralized configuration for API endpoints and settings\n */\n\nexport const API_CONFIG = {\n// Base URL - can be overridden by environment variable\n  BASE_URL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080/',\n  \n  // Default pagination settings\n  DEFAULT_PAGE_SIZE: 5,\n  MAX_PAGE_SIZE: 100,\n  \n  // Request timeout in milliseconds\n  TIMEOUT: 30000,\n  \n  // Retry configuration\n  MAX_RETRIES: 3,\n  RETRY_DELAY: 1000,\n  \n  // Cache configuration (in milliseconds)\n  CACHE_TTL: {\n    STORIES: 5 * 60 * 1000, // 5 minutes\n    COMMENTS: 10 * 60 * 1000, // 10 minutes\n    USERS: 15 * 60 * 1000, // 15 minutes\n  },\n} as const;\n\n/**\n * API Endpoints\n */\nexport const ENDPOINTS = {\n  // Stories\n  STORIES_TOP: '/api/stories/top',\n  STORIES_NEW: '/api/stories/new',\n  STORY_DETAIL: (id: number) => `/api/stories/${id}`,\n  STORY_COMMENTS: (id: number) => `/api/stories/${id}/comments`,\n  STORIES_SEARCH: '/api/stories/search',\n  \n  // Comments\n  COMMENT_DETAIL: (id: number) => `/api/comments/${id}`,\n  \n  // Users\n  USER_DETAIL: (username: string) => `/api/users/${username}`,\n  USER_STORIES: (username: string) => `/api/users/${username}/stories`,\n  USER_COMMENTS: (username: string) => `/api/users/${username}/comments`,\n} as const;\n\n/**\n * HTTP Methods\n */\nexport enum HttpMethod {\n  GET = 'GET',\n  POST = 'POST',\n  PUT = 'PUT',\n  DELETE = 'DELETE',\n  PATCH = 'PATCH',\n}\n\n/**\n * Request configuration\n */\nexport interface RequestConfig {\n  method?: HttpMethod;\n  headers?: Record<string, string>;\n  body?: unknown;\n  signal?: AbortSignal;\n  timeout?: number;\n}\n\n/**\n * Default headers for all requests\n */\nexport const DEFAULT_HEADERS = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n} as const;","/**\n * API Client\n * Core HTTP client for making API requests\n */\n\nimport { API_CONFIG } from '../config/api.config';\n\n/**\n * HTTP request options\n */\ninterface RequestOptions extends RequestInit {\n    params?: Record<string, string | number | boolean | undefined>;\n}\n\n/**\n * API Error class\n */\nexport class ApiError extends Error {\n    constructor(\n        message: string,\n        public status: number,\n        public statusText: string,\n        public data?: unknown\n    ) {\n        super(message);\n        this.name = 'ApiError';\n    }\n}\n\n/**\n * Build URL with query parameters\n */\nfunction buildUrl(endpoint: string, params?: Record<string, string | number | boolean | undefined>): string {\n    // Handle relative URLs by combining base URL and endpoint\n    const baseUrl = API_CONFIG.BASE_URL.startsWith('http') \n        ? API_CONFIG.BASE_URL \n        : window.location.origin + API_CONFIG.BASE_URL;\n    \n    const fullPath = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\n    const url = new URL(fullPath, baseUrl);\n\n    if (params) {\n        Object.entries(params).forEach(([key, value]) => {\n            if (value !== undefined && value !== null) {\n                url.searchParams.append(key, String(value));\n            }\n        });\n    }\n\n    return url.toString();\n}\n\n/**\n * Handle API response\n */\nasync function handleResponse<T>(response: Response): Promise<T> {\n    if (!response.ok) {\n        let errorData: unknown;\n        try {\n            errorData = await response.json();\n        } catch {\n            errorData = await response.text();\n        }\n\n        throw new ApiError(\n            `API request failed: ${response.statusText}`,\n            response.status,\n            response.statusText,\n            errorData\n        );\n    }\n\n    const contentType = response.headers.get('content-type');\n    if (contentType && contentType.includes('application/json')) {\n        return response.json();\n    }\n\n    return response.text() as Promise<T>;\n}\n\n/**\n * Make HTTP request\n */\nasync function request<T>(\n    endpoint: string,\n    options: RequestOptions = {}\n): Promise<T> {\n    const { params, ...fetchOptions } = options;\n\n    const url = buildUrl(endpoint, params);\n\n    const config: RequestInit = {\n        ...fetchOptions,\n        headers: {\n            'Content-Type': 'application/json',\n            ...fetchOptions.headers,\n        },\n    };\n\n    try {\n        const response = await fetch(url, config);\n        return handleResponse<T>(response);\n    } catch (error) {\n        if (error instanceof ApiError) {\n            throw error;\n        }\n\n        // Handle network errors\n        throw new ApiError(\n            error instanceof Error ? error.message : 'Network request failed',\n            0,\n            'Network Error'\n        );\n    }\n}\n\n/**\n * API Client\n */\nexport const apiClient = {\n    /**\n     * GET request\n     */\n    get<T>(\n        endpoint: string,\n        params?: Record<string, string | number | boolean | undefined>,\n        options?: RequestOptions\n    ): Promise<T> {\n        return request<T>(endpoint, {\n            ...options,\n            method: 'GET',\n            params,\n        });\n    },\n\n    /**\n     * POST request\n     */\n    post<T>(\n        endpoint: string,\n        data?: unknown,\n        options?: RequestOptions\n    ): Promise<T> {\n        return request<T>(endpoint, {\n            ...options,\n            method: 'POST',\n            body: data ? JSON.stringify(data) : undefined,\n        });\n    },\n\n    /**\n     * PUT request\n     */\n    put<T>(\n        endpoint: string,\n        data?: unknown,\n        options?: RequestOptions\n    ): Promise<T> {\n        return request<T>(endpoint, {\n            ...options,\n            method: 'PUT',\n            body: data ? JSON.stringify(data) : undefined,\n        });\n    },\n\n    /**\n     * PATCH request\n     */\n    patch<T>(\n        endpoint: string,\n        data?: unknown,\n        options?: RequestOptions\n    ): Promise<T> {\n        return request<T>(endpoint, {\n            ...options,\n            method: 'PATCH',\n            body: data ? JSON.stringify(data) : undefined,\n        });\n    },\n\n    /**\n     * DELETE request\n     */\n    delete<T>(\n        endpoint: string,\n        options?: RequestOptions\n    ): Promise<T> {\n        return request<T>(endpoint, {\n            ...options,\n            method: 'DELETE',\n        });\n    },\n};\n\nexport default apiClient;","/**\n * Stories API Service\n * Handles all story-related API calls\n */\n\nimport { apiClient } from './api';\nimport { ENDPOINTS } from '../config/api.config';\nimport type {\n  Story,\n  PaginatedStoryIds,\n  PaginatedCommentIds,\n  PaginationParams,\n  StorySearchRequest,\n} from '../types/api';\n\n/**\n * Stories Service\n */\nexport const storiesService = {\n  /**\n   * Get top stories\n   */\n  async getTopStories(params?: PaginationParams): Promise<PaginatedStoryIds> {\n    return apiClient.get<PaginatedStoryIds>(ENDPOINTS.STORIES_TOP, params);\n  },\n\n  /**\n   * Get new stories\n   */\n  async getNewStories(params?: PaginationParams): Promise<PaginatedStoryIds> {\n    return apiClient.get<PaginatedStoryIds>(ENDPOINTS.STORIES_NEW, params);\n  },\n\n  /**\n   * Get story details by ID\n   */\n  async getStoryById(id: number): Promise<Story> {\n    return apiClient.get<Story>(ENDPOINTS.STORY_DETAIL(id));\n  },\n  /**\n   * Get story details by ID (alias for getStoryById)\n   */\n  async getStory(id: number): Promise<Story> {\n    return this.getStoryById(id);\n  },\n\n\n  /**\n   * Get multiple stories by IDs\n   */\n  async getStoriesByIds(ids: number[]): Promise<Story[]> {\n    const promises = ids.map(id => this.getStoryById(id));\n    return Promise.all(promises);\n  },\n\n  /**\n   * Get story comments\n   */\n  async getStoryComments(\n    id: number,\n    params?: PaginationParams\n  ): Promise<PaginatedCommentIds> {\n    return apiClient.get<PaginatedCommentIds>(\n      ENDPOINTS.STORY_COMMENTS(id),\n      params\n    );\n  },\n\n  /**\n   * Search stories\n   */\n  async searchStories(request: StorySearchRequest): Promise<PaginatedStoryIds> {\n    return apiClient.post<PaginatedStoryIds>(\n      ENDPOINTS.STORIES_SEARCH,\n      request\n    );\n  },\n\n  /**\n   * Get stories with full details (helper method)\n   */\n  async getStoriesWithDetails(\n    ids: number[],\n    signal?: AbortSignal\n  ): Promise<Story[]> {\n    const promises = ids.map(id =>\n      apiClient.get<Story>(ENDPOINTS.STORY_DETAIL(id), undefined, { signal })\n    );\n    \n    // Use Promise.allSettled to handle partial failures\n    const results = await Promise.allSettled(promises);\n    \n    return results\n      .filter((result): result is PromiseFulfilledResult<Story> => \n        result.status === 'fulfilled'\n      )\n      .map(result => result.value);\n  },\n};\n\nexport default storiesService;","import { useState, useEffect, useCallback } from 'react';\nimport { storiesService } from '../services/stories';\nimport { Story, PaginatedStoryIds, StorySearchRequest } from '../types/api';\n\ninterface UseStoriesState {\n  data: PaginatedStoryIds | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\ninterface UseStoryState {\n  data: Story | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\nexport const useTopStories = (page: number = 1, pageSize: number = 5): UseStoriesState => {\n  const [data, setData] = useState<PaginatedStoryIds | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await storiesService.getTopStories({ page, pageSize });\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch top stories'));\n    } finally {\n      setLoading(false);\n    }\n  }, [page, pageSize]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n};\n\nexport const useNewStories = (page: number = 1, pageSize: number = 5): UseStoriesState => {\n  const [data, setData] = useState<PaginatedStoryIds | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await storiesService.getNewStories({ page, pageSize });\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch new stories'));\n    } finally {\n      setLoading(false);\n    }\n  }, [page, pageSize]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n};\n\nexport const useStory = (id: number | null): UseStoryState => {\n  const [data, setData] = useState<Story | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(async () => {\n    if (!id) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await storiesService.getStory(id);\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch story'));\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n};\n\nexport const useStoryComments = (\n  storyId: number | null,\n  page: number = 1,\n  pageSize: number = 5\n): UseStoriesState => {\n  const [data, setData] = useState<PaginatedStoryIds | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(async () => {\n    if (!storyId) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await storiesService.getStoryComments(storyId, { page, pageSize });\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch story comments'));\n    } finally {\n      setLoading(false);\n    }\n  }, [storyId, page, pageSize]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n};\n\ninterface UseSearchStoriesState {\n  data: PaginatedStoryIds | null;\n  loading: boolean;\n  error: Error | null;\n  search: (request: StorySearchRequest) => Promise<void>;\n}\n\nexport const useSearchStories = (): UseSearchStoriesState => {\n  const [data, setData] = useState<PaginatedStoryIds | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const search = useCallback(async (request: StorySearchRequest) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await storiesService.searchStories(request);\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to search stories'));\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  return { data, loading, error, search };\n};\n\n// Hook for batch fetching story details\ninterface UseBatchStoriesState {\n  stories: Map<number, Story>;\n  loading: boolean;\n  error: Error | null;\n  fetchStories: (ids: number[]) => Promise<void>;\n}\n\nexport const useBatchStories = (): UseBatchStoriesState => {\n  const [stories, setStories] = useState<Map<number, Story>>(new Map());\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchStories = useCallback(async (ids: number[]) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const results = await Promise.allSettled(\n        ids.map(id => storiesService.getStory(id))\n      );\n\n        const newStories = new Map(stories);\n        results.forEach((result, index) => {\n            if (result.status === 'fulfilled') {\n                newStories.set(ids[index], result.value);\n            }\n        });\n\n        setStories(newStories);\n    } catch (err) {\n        if (err instanceof Error && err.name === 'AbortError') {\n            return;\n        }\n        setError(err instanceof Error ? err : new Error('Failed to fetch stories'));\n    } finally {\n        setLoading(false);\n    }\n  }, [stories]);\n\n    return { stories, loading, error, fetchStories };\n};","import { useState, useCallback, useMemo } from 'react';\n\ninterface UsePaginationProps {\n  initialPage?: number;\n  initialPageSize?: number;\n  totalCount?: number;\n}\n\ninterface UsePaginationReturn {\n  page: number;\n  pageSize: number;\n  totalPages: number;\n  hasNextPage: boolean;\n  hasPreviousPage: boolean;\n  goToPage: (page: number) => void;\n  nextPage: () => void;\n  previousPage: () => void;\n  setPageSize: (size: number) => void;\n  reset: () => void;\n}\n\nexport const usePagination = ({\n  initialPage = 1,\n  initialPageSize = 5,\n  totalCount = 0,\n}: UsePaginationProps = {}): UsePaginationReturn => {\n  const [page, setPage] = useState(initialPage);\n  const [pageSize, setPageSize] = useState(initialPageSize);\n\n  const totalPages = useMemo(() => {\n    return Math.ceil(totalCount / pageSize) || 1;\n  }, [totalCount, pageSize]);\n\n  const hasNextPage = useMemo(() => {\n    return page < totalPages;\n  }, [page, totalPages]);\n\n  const hasPreviousPage = useMemo(() => {\n    return page > 1;\n  }, [page]);\n\n  const goToPage = useCallback((newPage: number) => {\n    setPage(Math.max(1, Math.min(newPage, totalPages)));\n  }, [totalPages]);\n\n  const nextPage = useCallback(() => {\n    if (hasNextPage) {\n      setPage(prev => prev + 1);\n    }\n  }, [hasNextPage]);\n\n  const previousPage = useCallback(() => {\n    if (hasPreviousPage) {\n      setPage(prev => prev - 1);\n    }\n  }, [hasPreviousPage]);\n\n  const handleSetPageSize = useCallback((size: number) => {\n    setPageSize(size);\n    setPage(1); // Reset to first page when changing page size\n  }, []);\n\n  const reset = useCallback(() => {\n    setPage(initialPage);\n    setPageSize(initialPageSize);\n  }, [initialPage, initialPageSize]);\n\n  return {\n    page,\n    pageSize,\n    totalPages,\n    hasNextPage,\n    hasPreviousPage,\n    goToPage,\n    nextPage,\n    previousPage,\n    setPageSize: handleSetPageSize,\n    reset,\n  };\n};\n\n// Hook for infinite scroll pagination\ninterface UseInfiniteScrollProps {\n  initialPageSize?: number;\n  onLoadMore: (page: number, pageSize: number) => Promise<{ hasMore: boolean }>;\n}\n\ninterface UseInfiniteScrollReturn {\n  page: number;\n  pageSize: number;\n  loading: boolean;\n  hasMore: boolean;\n  loadMore: () => Promise<void>;\n  reset: () => void;\n}\n\nexport const useInfiniteScroll = ({\n  initialPageSize = 5,\n  onLoadMore,\n}: UseInfiniteScrollProps): UseInfiniteScrollReturn => {\n  const [page, setPage] = useState(1);\n  const [pageSize] = useState(initialPageSize);\n  const [loading, setLoading] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n\n  const loadMore = useCallback(async () => {\n    if (loading || !hasMore) return;\n\n    try {\n      setLoading(true);\n      const result = await onLoadMore(page + 1, pageSize);\n      setHasMore(result.hasMore);\n      setPage(prev => prev + 1);\n    } catch (err) {\n      console.error('Failed to load more:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [loading, hasMore, page, pageSize, onLoadMore]);\n\n  const reset = useCallback(() => {\n    setPage(1);\n    setHasMore(true);\n  }, []);\n\n  return {\n    page,\n    pageSize,\n    loading,\n    hasMore,\n    loadMore,\n    reset,\n  };\n};","/**\n * Date utility functions for formatting and manipulating dates\n */\n\n/**\n * Format a date string or Date object to a relative time string\n * e.g., \"2 hours ago\", \"3 days ago\"\n */\nexport function formatRelativeTime(date: string | Date): string {\n    const now = new Date();\n    const then = typeof date === 'string' ? new Date(date) : date;\n    const diffInSeconds = Math.floor((now.getTime() - then.getTime()) / 1000);\n\n    if (diffInSeconds < 60) {\n        return 'just now';\n    }\n\n    const diffInMinutes = Math.floor(diffInSeconds / 60);\n    if (diffInMinutes < 60) {\n        return `${diffInMinutes} minute${diffInMinutes !== 1 ? 's' : ''} ago`;\n    }\n\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    if (diffInHours < 24) {\n        return `${diffInHours} hour${diffInHours !== 1 ? 's' : ''} ago`;\n    }\n\n    const diffInDays = Math.floor(diffInHours / 24);\n    if (diffInDays < 30) {\n        return `${diffInDays} day${diffInDays !== 1 ? 's' : ''} ago`;\n    }\n\n    const diffInMonths = Math.floor(diffInDays / 30);\n    if (diffInMonths < 12) {\n        return `${diffInMonths} month${diffInMonths !== 1 ? 's' : ''} ago`;\n    }\n\n    const diffInYears = Math.floor(diffInMonths / 12);\n    return `${diffInYears} year${diffInYears !== 1 ? 's' : ''} ago`;\n}\n\nexport const formatTimeAgo = formatRelativeTime;\n\n/**\n * Format a date to a readable string\n * e.g., \"January 15, 2024\"\n */\nexport function formatDate(date: string | Date): string {\n    const dateObj = typeof date === 'string' ? new Date(date) : date;\n    return dateObj.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n    });\n}\n\n/**\n * Format a date to include time\n * e.g., \"January 15, 2024 at 10:30 AM\"\n */\nexport function formatDateTime(date: string | Date): string {\n    const dateObj = typeof date === 'string' ? new Date(date) : date;\n    return dateObj.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: '2-digit',\n        hour12: true,\n    });\n}\n\n/**\n * Format a date to ISO 8601 string for API requests\n */\nexport function formatISO(date: Date): string {\n    return date.toISOString();\n}\n\n/**\n * Parse an ISO 8601 date string to a Date object\n */\nexport function parseISO(dateString: string): Date {\n    return new Date(dateString);\n}\n\n/**\n * Check if a date is valid\n */\nexport function isValidDate(date: any): boolean {\n    return date instanceof Date && !isNaN(date.getTime());\n}\n\n/**\n * Get the start of today (00:00:00)\n */\nexport function getStartOfToday(): Date {\n    const date = new Date();\n    date.setHours(0, 0, 0, 0);\n    return date;\n}\n\n/**\n * Get the end of today (23:59:59)\n */\nexport function getEndOfToday(): Date {\n    const date = new Date();\n    date.setHours(23, 59, 59, 999);\n    return date;\n}\n\n/**\n * Subtract days from a date\n */\nexport function subtractDays(date: Date, days: number): Date {\n    const result = new Date(date);\n    result.setDate(result.getDate() - days);\n    return result;\n}\n\n/**\n * Add days to a date\n */\nexport function addDays(date: Date, days: number): Date {\n    const result = new Date(date);\n    result.setDate(result.getDate() + days);\n    return result;\n}","import React from 'react';\n import { Link } from 'react-router-dom';\n import { Story } from '../../types/api';\n import { formatTimeAgo } from '../../utils/date';\n import './StoryMeta.css';\n\n export interface StoryMetaProps {\n  story: Story;\n  showCommentCount?: boolean;\n  className?: string;\n}\n\nexport const StoryMeta: React.FC<StoryMetaProps> = ({ \n  story, \n  showCommentCount = true,\n  className = '' \n}) => {\n  const timeAgo = formatTimeAgo(story.timestamp);\n\n  return (\n    <div className={`story-meta ${className}`}>\n      <span className=\"story-meta__item story-meta__score\">\n        <svg\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          aria-hidden=\"true\"\n        >\n          <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\n        </svg>\n        <span>{story.score} points</span>\n      </span>\n\n      <span className=\"story-meta__separator\">‚Ä¢</span>\n\n      <Link to={`/user/${story.author}`} className=\"story-meta__item story-meta__author\">\n        by {story.author}\n      </Link>\n\n      <span className=\"story-meta__separator\">‚Ä¢</span>\n\n      <time className=\"story-meta__item story-meta__time\" dateTime={story.timestamp}>\n        {timeAgo}\n      </time>\n\n      {showCommentCount && (\n        <>\n          <span className=\"story-meta__separator\">‚Ä¢</span>\n\n          <Link to={`/story/${story.id}`} className=\"story-meta__item story-meta__comments\">\n            <svg\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              aria-hidden=\"true\"\n            >\n              <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" />\n            </svg>\n            <span>\n              {story.commentCount} {story.commentCount === 1 ? 'comment' : 'comments'}\n            </span>\n          </Link>\n        </>\n      )}\n\n      {story.location && (\n        <>\n          <span className=\"story-meta__separator\">‚Ä¢</span>\n          <span className=\"story-meta__item story-meta__location\">\n            <svg\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              aria-hidden=\"true\"\n            >\n              <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\" />\n              <circle cx=\"12\" cy=\"10\" r=\"3\" />\n            </svg>\n            <span>{story.location}</span>\n          </span>\n        </>\n      )}\n\n      {story.topics.length > 0 && (\n        <>\n          <span className=\"story-meta__separator\">‚Ä¢</span>\n          <span className=\"story-meta__item story-meta__topics\">\n            {story.topics.slice(0, 2).join(', ')}\n          </span>\n        </>\n      )}\n    </div>\n  );\n};","import React from 'react';\n import './Badge.css';\n\n export interface BadgeProps {\n  children: React.ReactNode;\n  variant?: 'default' | 'primary' | 'secondary' | 'outline' | 'success' | 'warning' | 'danger' | 'info';\n  size?: 'small' | 'medium' | 'large';\n  className?: string;\n}\n\nexport const Badge: React.FC<BadgeProps> = ({\n  children,\n  variant = 'default',\n  size = 'medium',\n  className = '',\n}) => {\n  const classes = ['badge', `badge--${variant}`, `badge--${size}`, className]\n    .filter(Boolean)\n    .join(' ');\n\n  return <span className={classes}>{children}</span>;\n};","/**\n * URL utility functions for parsing and manipulating URLs\n */\n\n/**\n * Extract the domain from a URL\n * e.g., \"https://www.example.com/path\" -> \"example.com\"\n */\nexport function extractDomain(url: string): string {\n  try {\n    const urlObj = new URL(url);\n    return urlObj.hostname.replace(/^www\\./, '');\n  } catch {\n    return '';\n  }\n}\n\nexport const formatUrl = extractDomain;\n\n/**\n * Check if a string is a valid URL\n */\nexport function isValidUrl(url: string): boolean {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Build a query string from an object\n * e.g., { page: 1, size: 10 } -> \"page=1&size=10\"\n */\nexport function buildQueryString(params: Record<string, any>): string {\n  const searchParams = new URLSearchParams();\n  \n  Object.entries(params).forEach(([key, value]) => {\n    if (value !== undefined && value !== null && value !== '') {\n      if (Array.isArray(value)) {\n        value.forEach(item => searchParams.append(key, String(item)));\n      } else {\n        searchParams.append(key, String(value));\n      }\n    }\n  });\n\n  const queryString = searchParams.toString();\n  return queryString ? `?${queryString}` : '';\n}\n\n/**\n * Parse query string to an object\n */\nexport function parseQueryString(queryString: string): Record<string, string> {\n  const params = new URLSearchParams(queryString);\n  const result: Record<string, string> = {};\n  \n  params.forEach((value, key) => {\n    result[key] = value;\n  });\n  \n  return result;\n}\n\n/**\n * Get the base URL from the current location\n */\nexport function getBaseUrl(): string {\n  return `${window.location.protocol}//${window.location.host}`;\n}\n\n/**\n * Combine URL parts safely\n */\nexport function joinUrl(...parts: string[]): string {\n  return parts\n    .map((part, index) => {\n      if (index === 0) {\n        return part.replace(/\\/$/, '');\n      }\n      return part.replace(/^\\//, '').replace(/\\/$/, '');\n    })\n    .filter(Boolean)\n    .join('/');\n}\n\n/**\n * Open URL in a new tab\n */\nexport function openInNewTab(url: string): void {\n  window.open(url, '_blank', 'noopener,noreferrer');\n}\n\n/**\n * Check if URL is external\n */\nexport function isExternalUrl(url: string): boolean {\n  try {\n    const urlObj = new URL(url);\n    return urlObj.origin !== window.location.origin;\n  } catch {\n    return false;\n  }\n}","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Story } from '../../types/api';\nimport { StoryMeta } from './StoryMeta';\nimport { Badge } from '../common/Badge';\nimport { formatUrl } from '../../utils/url';\nimport './StoryItem.css';\n\nexport interface StoryItemProps {\n  story: Story;\n  rank?: number;\n  showFullContent?: boolean;\n  className?: string;\n}\n\nexport const StoryItem: React.FC<StoryItemProps> = ({\n  story,\n  rank,\n  showFullContent = false,\n  className = '',\n}) => {\n  const isExternalLink = story.url !== null;\n  const domain = story.url ? formatUrl(story.url) : null;\n\n  return (\n    <article className={`story-item ${className}`}>\n      <div className=\"story-item__content\">\n        {rank && <div className=\"story-item__rank\">{rank}.</div>}\n\n        <div className=\"story-item__main\">\n          <div className=\"story-item__header\">\n            <h2 className=\"story-item__title\">\n              {isExternalLink ? (\n                <>\n                  <a\n                    href={story.url!}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"story-item__link story-item__link--external\"\n                  >\n                    {story.title}\n                  </a>\n                  {domain && (\n                    <span className=\"story-item__domain\">({domain})</span>\n                  )}\n                </>\n              ) : (\n                <Link\n                  to={`/story/${story.id}`}\n                  className=\"story-item__link\"\n                >\n                  {story.title}\n                </Link>\n              )}\n            </h2>\n\n            {story.tags.length > 0 && (\n              <div className=\"story-item__tags\">\n                {story.tags.slice(0, 3).map(tag => (\n                  <Badge key={tag} variant=\"secondary\" size=\"small\">\n                    {tag}\n                  </Badge>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {showFullContent && story.text && (\n            <div\n              className=\"story-item__text\"\n              dangerouslySetInnerHTML={{ __html: story.text }}\n            />\n          )}\n\n          <StoryMeta story={story} />\n        </div>\n      </div>\n    </article>\n  );\n};","import React from 'react';\nimport './Button.css';\n\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'ghost' | 'danger';\n  size?: 'small' | 'medium' | 'large';\n  fullWidth?: boolean;\n  loading?: boolean;\n  icon?: React.ReactNode;\n  iconPosition?: 'left' | 'right';\n}\n\nexport const Button: React.FC<ButtonProps> = ({\n  children,\n  variant = 'primary',\n  size = 'medium',\n  fullWidth = false,\n  loading = false,\n  disabled = false,\n  icon,\n  iconPosition = 'left',\n  className = '',\n  ...props\n}) => {\n  const classes = [\n    'button',\n    `button--${variant}`,\n    `button--${size}`,\n    fullWidth && 'button--full-width',\n    loading && 'button--loading',\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <button\n      className={classes}\n      disabled={disabled || loading}\n      {...props}\n    >\n      {loading && (\n        <span className=\"button__spinner\" aria-hidden=\"true\">\n          <span className=\"spinner\" />\n        </span>\n      )}\n      {!loading && icon && iconPosition === 'left' && (\n        <span className=\"button__icon button__icon--left\">{icon}</span>\n      )}\n      {children && <span className=\"button__text\">{children}</span>}\n      {!loading && icon && iconPosition === 'right' && (\n        <span className=\"button__icon button__icon--right\">{icon}</span>\n      )}\n    </button>\n  );\n};","import React from 'react';\nimport { Button } from './Button';\nimport './Pagination.css';\n\nexport interface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n  hasMore?: boolean;\n  className?: string;\n}\n\nexport const Pagination: React.FC<PaginationProps> = ({\n  currentPage,\n  totalPages,\n  onPageChange,\n  hasMore = false,\n  className = '',\n}) => {\n  const getPageNumbers = () => {\n    const pages: (number | string)[] = [];\n    const maxVisible = 7;\n\n    if (totalPages <= maxVisible) {\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i);\n      }\n    } else {\n      if (currentPage <= 4) {\n        for (let i = 1; i <= 5; i++) {\n          pages.push(i);\n        }\n        pages.push('...');\n        pages.push(totalPages);\n      } else if (currentPage >= totalPages - 3) {\n        pages.push(1);\n        pages.push('...');\n        for (let i = totalPages - 4; i <= totalPages; i++) {\n          pages.push(i);\n        }\n      } else {\n        pages.push(1);\n        pages.push('...');\n        for (let i = currentPage - 1; i <= currentPage + 1; i++) {\n          pages.push(i);\n        }\n        pages.push('...');\n        pages.push(totalPages);\n      }\n    }\n\n    return pages;\n  };\n\n  const handlePrevious = () => {\n    if (currentPage > 1) {\n      onPageChange(currentPage - 1);\n    }\n  };\n\n  const handleNext = () => {\n    if (currentPage < totalPages || hasMore) {\n      onPageChange(currentPage + 1);\n    }\n  };\n\n  if (totalPages <= 1 && !hasMore) {\n    return null;\n  }\n\n  return (\n    <nav className={`pagination ${className}`} aria-label=\"Pagination\">\n      <Button\n        variant=\"ghost\"\n        size=\"small\"\n        onClick={handlePrevious}\n        disabled={currentPage === 1}\n        aria-label=\"Previous page\"\n      >\n        <svg\n          width=\"20\"\n          height=\"20\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        >\n          <polyline points=\"15 18 9 12 15 6\" />\n        </svg>\n        Previous\n      </Button>\n\n      <div className=\"pagination__pages\">\n        {getPageNumbers().map((page, index) => {\n          if (page === '...') {\n            return (\n              <span key={`ellipsis-${index}`} className=\"pagination__ellipsis\">\n                ...\n              </span>\n            );\n          }\n\n          return (\n            <Button\n              key={page}\n              variant={currentPage === page ? 'primary' : 'ghost'}\n              size=\"small\"\n              onClick={() => onPageChange(page as number)}\n              aria-label={`Page ${page}`}\n              aria-current={currentPage === page ? 'page' : undefined}\n            >\n              {page}\n            </Button>\n          );\n        })}\n      </div>\n\n      <Button\n        variant=\"ghost\"\n        size=\"small\"\n        onClick={handleNext}\n        disabled={!hasMore && currentPage === totalPages}\n        aria-label=\"Next page\"\n      >\n        Next\n        <svg\n          width=\"20\"\n          height=\"20\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        >\n          <polyline points=\"9 18 15 12 9 6\" />\n        </svg>\n      </Button>\n    </nav>\n  );\n};","import React from 'react';\nimport './Loading.css';\n\nexport interface LoadingProps {\n  size?: 'small' | 'medium' | 'large';\n  text?: string;\n  fullScreen?: boolean;\n  className?: string;\n}\n\nexport const Loading: React.FC<LoadingProps> = ({\n  size = 'medium',\n  text,\n  fullScreen = false,\n  className = '',\n}) => {\n  const classes = [\n    'loading',\n    `loading--${size}`,\n    fullScreen && 'loading--fullscreen',\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div className={classes} role=\"status\" aria-live=\"polite\">\n      <div className=\"spinner\" aria-hidden=\"true\">\n        <div className=\"spinner__circle\"></div>\n      </div>\n      {text && <p className=\"loading__text\">{text}</p>}\n      <span className=\"sr-only\">Loading...</span>\n    </div>\n  );\n};","import React from 'react';\n import { Button } from './Button';\n import './Error.css';\n\n export interface ErrorProps {\n  title?: string;\n  message: string;\n  onRetry?: () => void;\n  retryText?: string;\n  className?: string;\n  variant?: 'inline' | 'page';\n}\n\n export const Error: React.FC<ErrorProps> = ({\n  title = 'Something went wrong',\n  message,\n  onRetry,\n  retryText = 'Try Again',\n  className = '',\n  variant = 'inline',\n }) => {\n  const classes = ['error', `error--${variant}`, className].filter(Boolean).join(' ');\n\n  return (\n    <div className={classes} role=\"alert\">\n      <div className=\"error__icon\" aria-hidden=\"true\">\n        <svg\n          width=\"48\"\n          height=\"48\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"10\" />\n          <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\n          <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\n        </svg>\n      </div>\n      <div className=\"error__content\">\n        <h3 className=\"error__title\">{title}</h3>\n        <p className=\"error__message\">{message}</p>\n        {onRetry && (\n          <div className=\"error__actions\">\n            <Button onClick={onRetry} variant=\"primary\">\n              {retryText}\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","import React from 'react';\n import { Button } from './Button';\n import './EmptyState.css';\n\n export interface EmptyStateProps {\n  icon?: React.ReactNode;\n  title?: string;\n  description?: string;\n  message?: string;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n  className?: string;\n}\n\n export const EmptyState: React.FC<EmptyStateProps> = ({\n  icon,\n  title,\n  description,\n  message,\n  action,\n  className = '',\n }) => {\n  const displayTitle = title || message || 'No items found';\n  \n  return (\n    <div className={`empty-state ${className}`}>\n      {icon && <div className=\"empty-state__icon\">{icon}</div>}\n      <h3 className=\"empty-state__title\">{displayTitle}</h3>\n      {description && <p className=\"empty-state__description\">{description}</p>}\n      {action && (\n        <div className=\"empty-state__action\">\n          <Button onClick={action.onClick} variant=\"primary\">\n            {action.label}\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n};","import React, { useEffect } from 'react';\nimport { StoryItem } from './StoryItem';\nimport { Pagination } from '../common/Pagination';\nimport { Loading } from '../common/Loading';\nimport { Error } from '../common/Error';\nimport { EmptyState } from '../common/EmptyState';\nimport { Story } from '../../types/api';\nimport { useBatchStories } from '../../hooks/useStories';\nimport './StoryList.css';\n\nexport interface StoryListProps {\nstoryIds: number[];\ncurrentPage: number;\ntotalPages: number;\nhasMore: boolean;\nonPageChange: (page: number) => void;\nloading?: boolean;\nerror?: Error | null;\nemptyMessage?: string;\nclassName?: string;\n}\n\nexport const StoryList: React.FC<StoryListProps> = ({\n storyIds,\n currentPage,\n totalPages,\n hasMore,\n onPageChange,\n loading = false,\n error = null,\n emptyMessage = 'No stories found',\n className = '',\n }) => {\n const { stories, loading: storiesLoading, error: storiesError, fetchStories } = useBatchStories();\n\n useEffect(() => {\n    if (storyIds.length > 0) {\n      fetchStories(storyIds);\n    }\n  }, [storyIds.join(',')]);\n\nif (loading || storiesLoading) {\n    return <Loading size=\"large\" text=\"Loading stories...\" />;\n  }\n\nif (error || storiesError) {\n    return (\n      <Error\n        message={error?.message || storiesError?.message || 'Failed to load stories'}\n        onRetry={() => fetchStories(storyIds)}\n      />\n    );\n  }\n\nif (storyIds.length === 0) {\n    return <EmptyState message={emptyMessage} />;\n  }\n\nconst storyList = storyIds\n    .map(id => stories.get(id))\n    .filter((story): story is Story => story !== undefined);\n\nreturn (\n    <div className={`story-list ${className}`}>\n      <div className=\"story-list__items\">\n        {storyList.map((story, index) => (\n          <StoryItem\n            key={story.id}\n            story={story}\n            rank={currentPage > 1 ? (currentPage - 1) * storyIds.length + index + 1 : index + 1}\n          />\n        ))}\n      </div>\n\n      <Pagination\n        currentPage={currentPage}\n        totalPages={totalPages}\n        hasMore={hasMore}\n        onPageChange={onPageChange}\n        className=\"story-list__pagination\"\n      />\n    </div>\n  );\n};","import React from 'react';\n import { useTopStories } from '../hooks/useStories';\n import { usePagination } from '../hooks/usePagination';\n import { StoryList } from '../components/stories/StoryList';\n import './Home.css';\n\n export const Home: React.FC = () => {\n  const { page, pageSize, goToPage, totalPages: calculatedTotalPages } = usePagination();\n  const { data, loading, error } = useTopStories(page, pageSize);\n\n  const totalPages = data ? Math.ceil(data.totalCount / data.pageSize) : calculatedTotalPages;\n\n  return (\n    <div className=\"home\">\n      <div className=\"home__header\">\n        <h1 className=\"home__title\">Top Stories</h1>\n        <p className=\"home__subtitle\">\n          The best stories from around the web, ranked by score\n        </p>\n      </div>\n\n      <StoryList\n        storyIds={data?.ids || []}\n        currentPage={page}\n        totalPages={totalPages}\n        hasMore={data?.hasMore || false}\n        onPageChange={goToPage}\n        loading={loading}\n        error={error}\n        emptyMessage=\"No top stories available at the moment\"\n        className=\"home__story-list\"\n      />\n    </div>\n  );\n};","import React from 'react';\n import { useNewStories } from '../hooks/useStories';\n import { usePagination } from '../hooks/usePagination';\n import { StoryList } from '../components/stories/StoryList';\n import './NewStories.css';\n\n export const NewStories: React.FC = () => {\n  const { page, pageSize, goToPage, totalPages: calculatedTotalPages } = usePagination();\n  const { data, loading, error } = useNewStories(page, pageSize);\n\n  const totalPages = data ? Math.ceil(data.totalCount / data.pageSize) : calculatedTotalPages;\n\n  return (\n    <div className=\"new-stories\">\n      <div className=\"new-stories__header\">\n        <h1 className=\"new-stories__title\">New Stories</h1>\n        <p className=\"new-stories__subtitle\">\n          The latest stories submitted to the platform\n        </p>\n      </div>\n\n      <StoryList\n        storyIds={data?.ids || []}\n        currentPage={page}\n        totalPages={totalPages}\n        hasMore={data?.hasMore || false}\n        onPageChange={goToPage}\n        loading={loading}\n        error={error}\n        emptyMessage=\"No new stories available at the moment\"\n        className=\"new-stories__story-list\"\n      />\n    </div>\n  );\n};","import React from 'react';\nimport { Story } from '../../types/api';\nimport { StoryMeta } from './StoryMeta';\nimport { Badge } from '../common/Badge';\nimport { formatUrl } from '../../utils/url';\nimport './StoryContent.css';\n\nexport interface StoryContentProps {\n  story: Story;\n}\n\nexport const StoryContent: React.FC<StoryContentProps> = ({ story }) => {\n  const isExternalLink = story.url !== null;\n  const domain = story.url ? formatUrl(story.url) : null;\n\n  return (\n    <article className=\"story-content\">\n      <header className=\"story-content__header\">\n        <h1 className=\"story-content__title\">\n          {isExternalLink ? (\n            <>\n              <a\n                href={story.url!}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"story-content__link\"\n              >\n                {story.title}\n              </a>\n              {domain && (\n                <span className=\"story-content__domain\">({domain})</span>\n              )}\n            </>\n          ) : (\n            story.title\n          )}\n        </h1>\n\n        {(story.tags.length > 0 || story.topics.length > 0) && (\n          <div className=\"story-content__badges\">\n            {story.tags.map(tag => (\n              <Badge key={tag} variant=\"primary\" size=\"medium\">\n                {tag}\n              </Badge>\n            ))}\n            {story.topics.map(topic => (\n              <Badge key={topic} variant=\"secondary\" size=\"medium\">\n                {topic}\n              </Badge>\n            ))}\n          </div>\n        )}\n\n        <StoryMeta story={story} showCommentCount={false} />\n      </header>\n\n      {story.text && (\n        <div\n          className=\"story-content__text\"\n          dangerouslySetInnerHTML={{ __html: story.text }}\n        />\n      )}\n\n      {story.location && (\n        <div className=\"story-content__location\">\n          <svg\n            className=\"story-content__location-icon\"\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 16 16\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M8 0C5.24 0 3 2.24 3 5C3 8.5 8 14 8 14C8 14 13 8.5 13 5C13 2.24 10.76 0 8 0ZM8 6.5C7.17 6.5 6.5 5.83 6.5 5C6.5 4.17 7.17 3.5 8 3.5C8.83 3.5 9.5 4.17 9.5 5C9.5 5.83 8.83 6.5 8 6.5Z\"\n              fill=\"currentColor\"\n            />\n          </svg>\n          {story.location}\n        </div>\n      )}\n    </article>\n  );\n};","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Comment } from '../../types/api';\nimport { Badge } from '../common/Badge';\nimport { formatTimeAgo } from '../../utils/date';\nimport './CommentItem.css';\n\nexport interface CommentItemProps {\n  comment: Comment;\n  level: number;\n  onToggleCollapse?: () => void;\n  isCollapsed?: boolean;\n}\n\nexport const CommentItem: React.FC<CommentItemProps> = ({\n  comment,\n  level,\n  onToggleCollapse,\n  isCollapsed = false,\n}) => {\n  const [isExpanded, setIsExpanded] = useState(true);\n  const hasChildren = comment.childCommentIds.length > 0;\n\n  const handleToggle = () => {\n    if (onToggleCollapse) {\n      onToggleCollapse();\n    } else {\n      setIsExpanded(!isExpanded);\n    }\n  };\n\n  return (\n    <div className={`comment-item comment-item--level-${Math.min(level, 5)}`}>\n      <div className=\"comment-item__header\">\n        <button\n          className=\"comment-item__collapse-btn\"\n          onClick={handleToggle}\n          aria-label={isCollapsed ? 'Expand comment' : 'Collapse comment'}\n        >\n          {isCollapsed ? '+' : '‚àí'}\n        </button>\n\n        <div className=\"comment-item__meta\">\n          <Link\n            to={`/user/${comment.author}`}\n            className=\"comment-item__author\"\n          >\n            {comment.author}\n          </Link>\n          <span className=\"comment-item__separator\">‚Ä¢</span>\n          <time\n            className=\"comment-item__time\"\n            dateTime={comment.timestamp}\n            title={new Date(comment.timestamp).toLocaleString()}\n          >\n            {formatTimeAgo(comment.timestamp)}\n          </time>\n          {comment.location && (\n            <>\n              <span className=\"comment-item__separator\">‚Ä¢</span>\n              <span className=\"comment-item__location\">{comment.location}</span>\n            </>\n          )}\n        </div>\n\n        {comment.tags.length > 0 && (\n          <div className=\"comment-item__tags\">\n            {comment.tags.slice(0, 2).map(tag => (\n              <Badge key={tag} variant=\"secondary\" size=\"small\">\n                {tag}\n              </Badge>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {!isCollapsed && (\n        <>\n          <div\n            className=\"comment-item__text\"\n            dangerouslySetInnerHTML={{ __html: comment.text }}\n          />\n\n          {hasChildren && (\n            <div className=\"comment-item__footer\">\n              <span className=\"comment-item__reply-count\">\n                {comment.childCommentIds.length}{' '}\n                {comment.childCommentIds.length === 1 ? 'reply' : 'replies'}\n              </span>\n            </div>\n          )}\n        </>\n      )}\n\n      {isCollapsed && hasChildren && (\n        <div className=\"comment-item__collapsed-info\">\n          {comment.childCommentIds.length} hidden{' '}\n          {comment.childCommentIds.length === 1 ? 'reply' : 'replies'}\n        </div>\n      )}\n    </div>\n  );\n};","import React, { useState } from 'react';\nimport { Comment } from '../../types/api';\nimport { CommentItem } from './CommentItem';\nimport './CommentThread.css';\n\nexport interface CommentThreadProps {\n  comment: Comment;\n  allComments: Map<number, Comment>;\n  level: number;\n  maxLevel?: number;\n}\n\nexport const CommentThread: React.FC<CommentThreadProps> = ({\n  comment,\n  allComments,\n  level,\n  maxLevel = 10,\n}) => {\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const hasChildren = comment.childCommentIds.length > 0;\n  const shouldNest = level < maxLevel;\n\n  return (\n    <div className=\"comment-thread\">\n      <CommentItem\n        comment={comment}\n        level={level}\n        onToggleCollapse={() => setIsCollapsed(!isCollapsed)}\n        isCollapsed={isCollapsed}\n      />\n\n      {!isCollapsed && hasChildren && shouldNest && (\n        <div className=\"comment-thread__children\">\n          {comment.childCommentIds.map(childId => {\n            const childComment = allComments.get(childId);\n            if (!childComment) return null;\n\n            return (\n              <CommentThread\n                key={childId}\n                comment={childComment}\n                allComments={allComments}\n                level={level + 1}\n                maxLevel={maxLevel}\n              />\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};","import React from 'react';\n import { Loading } from './Loading';\n import './LoadingInline.css';\n\n export interface LoadingInlineProps {\n  text?: string;\n  message?: string;\n  size?: 'small' | 'medium' | 'large';\n  className?: string;\n}\n\n export const LoadingInline: React.FC<LoadingInlineProps> = ({\n  text,\n  message,\n  size = 'medium',\n  className = '',\n }) => {\n  return (\n    <div className={`loading-inline ${className}`}>\n      <Loading size={size} text={message || text} />\n    </div>\n  );\n};","/**\n * Comments API Service\n * Handles all comment-related API calls\n */\n\nimport { apiClient } from './api';\nimport { ENDPOINTS } from '../config/api.config';\nimport type { Comment } from '../types/api';\n\n/**\n * Comments Service\n */\nexport const commentsService = {\n  /**\n   * Get comment details by ID\n   */\n  async getCommentById(id: number): Promise<Comment> {\n    return apiClient.get<Comment>(ENDPOINTS.COMMENT_DETAIL(id));\n  },\n  /**\n   * Get comment details by ID (alias for getCommentById)\n   */\n  async getComment(id: number): Promise<Comment> {\n    return this.getCommentById(id);\n  },\n\n\n  /**\n   * Get multiple comments by IDs\n   */\n  async getCommentsByIds(ids: number[]): Promise<Comment[]> {\n    const promises = ids.map(id => this.getCommentById(id));\n    return Promise.all(promises);\n  },\n\n  /**\n   * Get comment with all nested children (recursive)\n   */\n  async getCommentThread(id: number): Promise<Comment> {\n    const comment = await this.getCommentById(id);\n    \n    if (comment.childCommentIds.length > 0) {\n      const childComments = await this.getCommentsByIds(comment.childCommentIds);\n      // Attach children to comment object (extending the type)\n      return {\n        ...comment,\n        children: childComments,\n      } as Comment & { children: Comment[] };\n    }\n    \n    return comment;\n  },\n\n  /**\n   * Get comments with details (helper method)\n   */\n  async getCommentsWithDetails(\n    ids: number[],\n    signal?: AbortSignal\n  ): Promise<Comment[]> {\n    const promises = ids.map(id =>\n      apiClient.get<Comment>(ENDPOINTS.COMMENT_DETAIL(id), undefined, { signal })\n    );\n    \n    // Use Promise.allSettled to handle partial failures\n    const results = await Promise.allSettled(promises);\n    \n    return results\n      .filter((result): result is PromiseFulfilledResult<Comment> => \n        result.status === 'fulfilled'\n      )\n      .map(result => result.value);\n  },\n\n  /**\n   * Build comment tree structure\n   */\n  buildCommentTree(comments: Comment[]): Comment[] {\n    const commentMap = new Map<number, Comment & { children?: Comment[] }>();\n    const rootComments: Comment[] = [];\n\n    // First pass: create map of all comments\n    comments.forEach(comment => {\n      commentMap.set(comment.id, { ...comment, children: [] });\n    });\n\n    // Second pass: build tree structure\n    comments.forEach(comment => {\n      const commentWithChildren = commentMap.get(comment.id);\n      if (!commentWithChildren) return;\n\n      // If this comment has a parent in our set, add it as a child\n      const parent = commentMap.get(comment.parentId);\n      if (parent && parent.children) {\n        parent.children.push(commentWithChildren);\n      } else {\n        // Otherwise, it's a root comment\n        rootComments.push(commentWithChildren);\n      }\n    });\n\n    return rootComments;\n  },\n};\n\nexport default commentsService;","import { useState, useEffect, useCallback } from 'react';\nimport { commentsService } from '../services/comments';\nimport { Comment } from '../types/api';\n\ninterface UseCommentState {\n  data: Comment | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\nexport const useComment = (id: number | null): UseCommentState => {\n  const [data, setData] = useState<Comment | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(async () => {\n    if (!id) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await commentsService.getComment(id);\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch comment'));\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n};\n\n// Hook for batch fetching comment details\ninterface UseBatchCommentsState {\n  comments: Map<number, Comment>;\n  loading: boolean;\n  error: Error | null;\n  fetchComments: (ids: number[]) => Promise<void>;\n  clearComments: () => void;\n}\n\nexport const useBatchComments = (): UseBatchCommentsState => {\n  const [comments, setComments] = useState<Map<number, Comment>>(new Map());\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchComments = useCallback(async (ids: number[]) => {\n    if (ids.length === 0) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const results = await Promise.allSettled(\n        ids.map(id => commentsService.getComment(id))\n      );\n\n      setComments(prevComments => {\n        const newComments = new Map(prevComments);\n        results.forEach((result, index) => {\n          if (result.status === 'fulfilled') {\n            newComments.set(ids[index], result.value);\n          }\n        });\n        return newComments;\n      });\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch comments'));\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const clearComments = useCallback(() => {\n    setComments(new Map());\n  }, []);\n\n  return { comments, loading, error, fetchComments, clearComments };\n};\n\n// Hook for fetching comment thread (parent + all children recursively)\ninterface UseCommentThreadState {\n  comments: Map<number, Comment>;\n  loading: boolean;\n  error: Error | null;\n  fetchThread: (rootCommentId: number) => Promise<void>;\n}\n\nexport const useCommentThread = (): UseCommentThreadState => {\n  const [comments, setComments] = useState<Map<number, Comment>>(new Map());\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchThread = useCallback(async (rootCommentId: number) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const fetchedComments = new Map<number, Comment>();\n      const toFetch: number[] = [rootCommentId];\n\n      while (toFetch.length > 0) {\n        const currentId = toFetch.shift()!;\n        \n        if (fetchedComments.has(currentId)) continue;\n\n        try {\n          const comment = await commentsService.getComment(currentId);\n          fetchedComments.set(currentId, comment);\n          \n          // Add child comments to fetch queue\n          if (comment.childCommentIds && comment.childCommentIds.length > 0) {\n            toFetch.push(...comment.childCommentIds);\n          }\n        } catch (err) {\n          console.error(`Failed to fetch comment ${currentId}:`, err);\n        }\n      }\n\n      setComments(fetchedComments);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch comment thread'));\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  return { comments, loading, error, fetchThread };\n};","import React from 'react';\n import { CommentThread } from './CommentThread';\n import { LoadingInline } from '../common/LoadingInline';\n import { useBatchComments } from '../../hooks/useComments';\n import './CommentList.css';\n\n export interface CommentListProps {\n  commentIds: number[];\n  currentPage?: number;\n  totalPages?: number;\n  hasMore?: boolean;\n  onPageChange?: (page: number) => void;\n  showParentContext?: boolean;\n  className?: string;\n}\n\n export const CommentList: React.FC<CommentListProps> = ({\n  commentIds,\n  className = '',\n }) => {\n  const { comments, loading, error, fetchComments } = useBatchComments();\n\n  React.useEffect(() => {\n    if (commentIds.length > 0) {\n      fetchComments(commentIds);\n    }\n  }, [commentIds, fetchComments]);\n\n  if (loading && comments.size === 0) {\n    return <LoadingInline message=\"Loading comments...\" />;\n  }\n\n  if (error && comments.size === 0) {\n    return (\n      <div className=\"comment-list__error\">\n        Failed to load comments. Please try again.\n      </div>\n    );\n  }\n\n  return (\n    <div className={`comment-list ${className}`}>\n      {commentIds.map(commentId => {\n        const comment = comments.get(commentId);\n        if (!comment) return null;\n\n        return (\n          <CommentThread\n            key={commentId}\n            comment={comment}\n            allComments={comments}\n            level={0}\n          />\n        );\n      })}\n    </div>\n  );\n};","import React from 'react';\n import { Loading } from './Loading';\n import './LoadingPage.css';\n\n export interface LoadingPageProps {\n  text?: string;\n  message?: string;\n}\n\nexport const LoadingPage: React.FC<LoadingPageProps> = ({ text = 'Loading...', message }) => {\n  return (\n    <div className=\"loading-page\">\n      <Loading size=\"large\" text={message || text} fullScreen />\n    </div>\n  );\n};","import React, { useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useStory, useStoryComments } from '../hooks/useStories';\nimport { StoryContent } from '../components/stories/StoryContent';\nimport { CommentList } from '../components/comments/CommentList';\nimport { LoadingPage } from '../components/common/LoadingPage';\nimport { Error } from '../components/common/Error';\nimport { Button } from '../components/common/Button';\nimport './StoryDetail.css';\n\nexport const StoryDetail: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const storyId = id ? parseInt(id, 10) : null;\n\n  const {\n    data: story,\n    loading: storyLoading,\n    error: storyError,\n    refetch: refetchStory,\n  } = useStory(storyId);\n\n  const {\n    data: commentsData,\n    loading: commentsLoading,\n    error: commentsError,\n    refetch: refetchComments,\n  } = useStoryComments(storyId, 1, 100);\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [id]);\n\n  if (storyLoading) {\n    return <LoadingPage message=\"Loading story...\" />;\n  }\n\n  if (storyError || !story) {\n    return (\n      <div className=\"story-detail__error-container\">\n        <Error\n          message={storyError?.message || 'Story not found'}\n          onRetry={refetchStory}\n        />\n        <Link to=\"/\" className=\"story-detail__back-link\">\n          <Button variant=\"secondary\">‚Üê Back to Home</Button>\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"story-detail\">\n      <div className=\"story-detail__header\">\n        <Link to=\"/\" className=\"story-detail__back-link\">\n          <Button variant=\"ghost\" size=\"small\">\n            ‚Üê Back\n          </Button>\n        </Link>\n      </div>\n\n      <StoryContent story={story} />\n\n      <div className=\"story-detail__comments-section\">\n        <div className=\"story-detail__comments-header\">\n          <h2 className=\"story-detail__comments-title\">\n            {story.commentCount} {story.commentCount === 1 ? 'Comment' : 'Comments'}\n          </h2>\n          {commentsError && (\n            <Button\n              variant=\"secondary\"\n              size=\"small\"\n              onClick={refetchComments}\n            >\n              Retry Loading Comments\n            </Button>\n          )}\n        </div>\n\n        {commentsError ? (\n          <Error\n            message=\"Failed to load comments\"\n            onRetry={refetchComments}\n          />\n        ) : commentsLoading ? (\n          <div className=\"story-detail__comments-loading\">\n            <LoadingPage message=\"Loading comments...\" />\n          </div>\n        ) : commentsData && commentsData.ids.length > 0 ? (\n          <CommentList commentIds={commentsData.ids} />\n        ) : (\n          <div className=\"story-detail__no-comments\">\n            <p>No comments yet. Be the first to comment!</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","/**\n * Enumerations for API types\n */\n\n/**\n * StorySortOrder - Available sorting options for stories\n */\nexport enum StorySortOrder {\n  SCORE = 'SCORE',\n  RECENT = 'RECENT',\n  COMMENTS = 'COMMENTS',\n}\n\n/**\n * HTTP Status Codes used by the API\n */\nexport enum HttpStatus {\n  OK = 200,\n  BAD_REQUEST = 400,\n  NOT_FOUND = 404,\n  INTERNAL_SERVER_ERROR = 500,\n}\n\n/**\n * API Endpoint paths\n */\nexport enum ApiEndpoint {\n  STORIES_TOP = '/api/stories/top',\n  STORIES_NEW = '/api/stories/new',\n  STORIES_DETAIL = '/api/stories',\n  STORIES_SEARCH = '/api/stories/search',\n  STORIES_COMMENTS = '/api/stories/:id/comments',\n  COMMENTS_DETAIL = '/api/comments',\n  USERS_DETAIL = '/api/users',\n  USERS_STORIES = '/api/users/:username/stories',\n  USERS_COMMENTS = '/api/users/:username/comments',\n}\n\n/**\n * Route paths for the application\n */\nexport enum RoutePath {\n  HOME = '/',\n  NEW = '/new',\n  STORY = '/story/:id',\n  SEARCH = '/search',\n  USER = '/user/:username',\n  NOT_FOUND = '*',\n}\n\n/**\n * Local storage keys\n */\nexport enum StorageKey {\n  THEME = 'news-app-theme',\n  CACHED_STORIES = 'news-app-cached-stories',\n  CACHED_USERS = 'news-app-cached-users',\n  SEARCH_HISTORY = 'news-app-search-history',\n}\n\n/**\n * Theme options\n */\nexport enum Theme {\n  LIGHT = 'light',\n  DARK = 'dark',\n  SYSTEM = 'system',\n}\n\n/**\n * Error types for better error handling\n */\nexport enum ErrorType {\n  NETWORK = 'NETWORK',\n  NOT_FOUND = 'NOT_FOUND',\n  VALIDATION = 'VALIDATION',\n  SERVER = 'SERVER',\n  UNKNOWN = 'UNKNOWN',\n}\n\n/**\n * Loading state types\n */\nexport enum LoadingType {\n  INITIAL = 'INITIAL',\n  REFRESH = 'REFRESH',\n  LOAD_MORE = 'LOAD_MORE',\n}","import React, { FormEvent } from 'react';\nimport { Button } from '../common/Button';\nimport { StorySortOrder } from '../../types/api';\nimport './SearchForm.css';\n\ninterface SearchFormProps {\n  formState: {\n    query: string;\n    author: string;\n    minScore: number | undefined;\n    sortOrder: StorySortOrder;\n  };\n  updateField: <K extends keyof any>(field: K, value: any) => void;\n  onSearch: () => void;\n  onReset: () => void;\n  loading: boolean;\n}\n\nexport const SearchForm: React.FC<SearchFormProps> = ({\n  formState,\n  updateField,\n  onSearch,\n  onReset,\n  loading,\n}) => {\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    onSearch();\n  };\n\n  return (\n    <form className=\"search-form\" onSubmit={handleSubmit}>\n      <div className=\"search-form__header\">\n        <h2>Search</h2>\n      </div>\n\n      <div className=\"search-form__field\">\n        <label htmlFor=\"search-query\" className=\"search-form__label\">\n          Search Query\n        </label>\n        <input\n          id=\"search-query\"\n          type=\"text\"\n          className=\"search-form__input\"\n          placeholder=\"Enter keywords...\"\n          value={formState.query}\n          onChange={(e) => updateField('query', e.target.value)}\n          disabled={loading}\n        />\n        <span className=\"search-form__hint\">\n          Search in titles and content\n        </span>\n      </div>\n\n      <div className=\"search-form__field\">\n        <label htmlFor=\"search-author\" className=\"search-form__label\">\n          Author\n        </label>\n        <input\n          id=\"search-author\"\n          type=\"text\"\n          className=\"search-form__input\"\n          placeholder=\"Username...\"\n          value={formState.author}\n          onChange={(e) => updateField('author', e.target.value)}\n          disabled={loading}\n        />\n      </div>\n\n      <div className=\"search-form__field\">\n        <label htmlFor=\"search-min-score\" className=\"search-form__label\">\n          Minimum Score\n        </label>\n        <input\n          id=\"search-min-score\"\n          type=\"number\"\n          className=\"search-form__input\"\n          placeholder=\"0\"\n          min=\"0\"\n          value={formState.minScore ?? ''}\n          onChange={(e) => updateField('minScore', e.target.value ? parseInt(e.target.value, 10) : undefined)}\n          disabled={loading}\n        />\n      </div>\n\n      <div className=\"search-form__field\">\n        <label htmlFor=\"search-sort\" className=\"search-form__label\">\n          Sort By\n        </label>\n        <select\n          id=\"search-sort\"\n          className=\"search-form__select\"\n          value={formState.sortOrder}\n          onChange={(e) => updateField('sortOrder', e.target.value as StorySortOrder)}\n          disabled={loading}\n        >\n          <option value={StorySortOrder.SCORE}>Highest Score</option>\n          <option value={StorySortOrder.RECENT}>Most Recent</option>\n          <option value={StorySortOrder.COMMENTS}>Most Comments</option>\n        </select>\n      </div>\n\n      <div className=\"search-form__actions\">\n        <Button\n          type=\"submit\"\n          variant=\"primary\"\n          fullWidth\n          loading={loading}\n          disabled={loading}\n        >\n          Search\n        </Button>\n        <Button\n          type=\"button\"\n          variant=\"secondary\"\n          fullWidth\n          onClick={onReset}\n          disabled={loading}\n        >\n          Reset\n        </Button>\n      </div>\n    </form>\n  );\n};","import React, { useState } from 'react';\nimport { Button } from '../common/Button';\nimport './SearchFilters.css';\n\ninterface SearchFiltersProps {\n  formState: {\n    tags: string[];\n    topics: string[];\n    location: string;\n    after: string;\n    before: string;\n  };\n  updateField: <K extends keyof any>(field: K, value: any) => void;\n  onApply: () => void;\n}\n\nexport const SearchFilters: React.FC<SearchFiltersProps> = ({\n  formState,\n  updateField,\n  onApply,\n}) => {\n  const [tagInput, setTagInput] = useState('');\n  const [topicInput, setTopicInput] = useState('');\n\n  const handleAddTag = () => {\n    if (tagInput.trim() && !formState.tags.includes(tagInput.trim())) {\n      updateField('tags', [...formState.tags, tagInput.trim()]);\n      setTagInput('');\n    }\n  };\n\n  const handleRemoveTag = (tag: string) => {\n    updateField('tags', formState.tags.filter(t => t !== tag));\n  };\n\n  const handleAddTopic = () => {\n    if (topicInput.trim() && !formState.topics.includes(topicInput.trim())) {\n      updateField('topics', [...formState.topics, topicInput.trim()]);\n      setTopicInput('');\n    }\n  };\n\n  const handleRemoveTopic = (topic: string) => {\n    updateField('topics', formState.topics.filter(t => t !== topic));\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent, handler: () => void) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handler();\n    }\n  };\n\n  return (\n    <div className=\"search-filters\">\n      <div className=\"search-filters__header\">\n        <h2>Advanced Filters</h2>\n      </div>\n\n      <div className=\"search-filters__section\">\n        <label className=\"search-filters__label\">Tags</label>\n        <div className=\"search-filters__input-group\">\n          <input\n            type=\"text\"\n            className=\"search-filters__input\"\n            placeholder=\"Add tag...\"\n            value={tagInput}\n            onChange={(e) => setTagInput(e.target.value)}\n            onKeyPress={(e) => handleKeyPress(e, handleAddTag)}\n          />\n          <Button\n            variant=\"secondary\"\n            size=\"small\"\n            onClick={handleAddTag}\n            disabled={!tagInput.trim()}\n          >\n            Add\n          </Button>\n        </div>\n        {formState.tags.length > 0 && (\n          <div className=\"search-filters__chips\">\n            {formState.tags.map(tag => (\n              <span key={tag} className=\"search-filters__chip\">\n                {tag}\n                <button\n                  type=\"button\"\n                  className=\"search-filters__chip-remove\"\n                  onClick={() => handleRemoveTag(tag)}\n                  aria-label={`Remove ${tag}`}\n                >\n                  √ó\n                </button>\n              </span>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"search-filters__section\">\n        <label className=\"search-filters__label\">Topics</label>\n        <div className=\"search-filters__input-group\">\n          <input\n            type=\"text\"\n            className=\"search-filters__input\"\n            placeholder=\"Add topic...\"\n            value={topicInput}\n            onChange={(e) => setTopicInput(e.target.value)}\n            onKeyPress={(e) => handleKeyPress(e, handleAddTopic)}\n          />\n          <Button\n            variant=\"secondary\"\n            size=\"small\"\n            onClick={handleAddTopic}\n            disabled={!topicInput.trim()}\n          >\n            Add\n          </Button>\n        </div>\n        {formState.topics.length > 0 && (\n          <div className=\"search-filters__chips\">\n            {formState.topics.map(topic => (\n              <span key={topic} className=\"search-filters__chip\">\n                {topic}\n                <button\n                  type=\"button\"\n                  className=\"search-filters__chip-remove\"\n                  onClick={() => handleRemoveTopic(topic)}\n                  aria-label={`Remove ${topic}`}\n                >\n                  √ó\n                </button>\n              </span>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"search-filters__section\">\n        <label htmlFor=\"filter-location\" className=\"search-filters__label\">\n          Location\n        </label>\n        <input\n          id=\"filter-location\"\n          type=\"text\"\n          className=\"search-filters__input\"\n          placeholder=\"City, State or Country...\"\n          value={formState.location}\n          onChange={(e) => updateField('location', e.target.value)}\n        />\n      </div>\n\n      <div className=\"search-filters__section\">\n        <label htmlFor=\"filter-after\" className=\"search-filters__label\">\n          After Date\n        </label>\n        <input\n          id=\"filter-after\"\n          type=\"date\"\n          className=\"search-filters__input\"\n          value={formState.after}\n          onChange={(e) => updateField('after', e.target.value)}\n        />\n      </div>\n\n      <div className=\"search-filters__section\">\n        <label htmlFor=\"filter-before\" className=\"search-filters__label\">\n          Before Date\n        </label>\n        <input\n          id=\"filter-before\"\n          type=\"date\"\n          className=\"search-filters__input\"\n          value={formState.before}\n          onChange={(e) => updateField('before', e.target.value)}\n        />\n      </div>\n\n      <div className=\"search-filters__actions\">\n        <Button\n          variant=\"primary\"\n          fullWidth\n          onClick={onApply}\n        >\n          Apply Filters\n        </Button>\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { StoryList } from '../stories/StoryList';\nimport { Loading } from '../common/Loading';\nimport { Error } from '../common/Error';\nimport { EmptyState } from '../common/EmptyState';\nimport { PaginatedStoryIds, StorySortOrder } from '../../types/api';\nimport './SearchResults.css';\n\ninterface SearchResultsProps {\n  results: PaginatedStoryIds | null;\n  loading: boolean;\n  error: Error | null;\n  sortOrder: StorySortOrder;\n  onSortChange: (sortOrder: StorySortOrder) => void;\n  onPageChange: (page: number) => void;\n  onRetry: () => void;\n}\n\nexport const SearchResults: React.FC<SearchResultsProps> = ({\n  results,\n  loading,\n  error,\n  sortOrder,\n  onSortChange,\n  onPageChange,\n  onRetry,\n}) => {\n  if (loading && !results) {\n    return (\n      <div className=\"search-results\">\n        <Loading size=\"large\" text=\"Searching...\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"search-results\">\n        <Error\n          message={error.message || 'Search failed'}\n          onRetry={onRetry}\n        />\n      </div>\n    );\n  }\n\n  if (!results) {\n    return (\n      <div className=\"search-results\">\n        <EmptyState\n          message=\"Enter search criteria to find stories\"\n          icon=\"üîç\"\n        />\n      </div>\n    );\n  }\n\n  const totalPages = Math.ceil(results.totalCount / results.pageSize);\n\n  return (\n    <div className=\"search-results\">\n      <div className=\"search-results__header\">\n        <div className=\"search-results__info\">\n          <h2 className=\"search-results__title\">\n            {results.totalCount} {results.totalCount === 1 ? 'result' : 'results'} found\n          </h2>\n          {results.totalCount > 0 && (\n            <p className=\"search-results__subtitle\">\n              Showing {((results.page - 1) * results.pageSize) + 1} - {Math.min(results.page * results.pageSize, results.totalCount)} of {results.totalCount}\n            </p>\n          )}\n        </div>\n\n        {results.totalCount > 0 && (\n          <div className=\"search-results__sort\">\n            <label htmlFor=\"results-sort\" className=\"search-results__sort-label\">\n              Sort by:\n            </label>\n            <select\n              id=\"results-sort\"\n              className=\"search-results__sort-select\"\n              value={sortOrder}\n              onChange={(e) => onSortChange(e.target.value as StorySortOrder)}\n            >\n              <option value={StorySortOrder.SCORE}>Highest Score</option>\n              <option value={StorySortOrder.RECENT}>Most Recent</option>\n              <option value={StorySortOrder.COMMENTS}>Most Comments</option>\n            </select>\n          </div>\n        )}\n      </div>\n\n      {results.ids.length === 0 ? (\n        <EmptyState\n          message=\"No stories match your search criteria\"\n          icon=\"üì≠\"\n        />\n      ) : (\n        <StoryList\n          storyIds={results.ids}\n          currentPage={results.page}\n          totalPages={totalPages}\n          hasMore={results.hasMore}\n          onPageChange={onPageChange}\n          loading={loading}\n          emptyMessage=\"No stories found\"\n        />\n      )}\n    </div>\n  );\n};","import { useState, useCallback, useEffect, useRef } from 'react';\n import { storiesService } from '../services/stories';\n import { StorySearchRequest, PaginatedStoryIds, StorySortOrder } from '../types/api';\n\n interface UseSearchState {\n  results: PaginatedStoryIds | null;\n  loading: boolean;\n  error: Error | null;\n  search: (params: StorySearchRequest) => Promise<void>;\n  clearResults: () => void;\n}\n\n export const useSearch = (debounceMs: number = 300): UseSearchState => {\n  const [results, setResults] = useState<PaginatedStoryIds | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const debounceTimerRef = useRef<number | null>(null);\n\n  const search = useCallback(async (params: StorySearchRequest) => {\n    // Clear existing timer\n    if (debounceTimerRef.current) {\n      clearTimeout(debounceTimerRef.current);\n    }\n\n    // Set up debounced search\n    debounceTimerRef.current = setTimeout(async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const result = await storiesService.searchStories(params);\n        setResults(result);\n      } catch (err) {\n        setError(err instanceof Error ? err : new Error('Search failed'));\n      } finally {\n        setLoading(false);\n      }\n    }, debounceMs);\n  }, [debounceMs]);\n\n  const clearResults = useCallback(() => {\n    setResults(null);\n    setError(null);\n  }, []);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (debounceTimerRef.current) {\n        clearTimeout(debounceTimerRef.current);\n      }\n    };\n  }, []);\n\n  return { results, loading, error, search, clearResults };\n};\n\n// Hook for managing search form state\ninterface SearchFormState {\n  query: string;\n  tags: string[];\n  topics: string[];\n  location: string;\n  author: string;\n  minScore: number | undefined;\n  after: string;\n  before: string;\n  sortOrder: StorySortOrder;\n  page: number;\n  pageSize: number;\n}\n\ninterface UseSearchFormState {\n  formState: SearchFormState;\n  updateField: <K extends keyof SearchFormState>(field: K, value: SearchFormState[K]) => void;\n  resetForm: () => void;\n  toSearchRequest: () => StorySearchRequest;\n}\n\nconst initialFormState: SearchFormState = {\n  query: '',\n  tags: [],\n  topics: [],\n  location: '',\n  author: '',\n  minScore: undefined,\n  after: '',\n  before: '',\n  sortOrder: StorySortOrder.SCORE,\n  page: 1,\n  pageSize: 5,\n};\n\nexport const useSearchForm = (): UseSearchFormState => {\n  const [formState, setFormState] = useState<SearchFormState>(initialFormState);\n\n  const updateField = useCallback(<K extends keyof SearchFormState>(\n    field: K,\n    value: SearchFormState[K]\n  ) => {\n    setFormState(prev => ({ ...prev, [field]: value }));\n  }, []);\n\n  const resetForm = useCallback(() => {\n    setFormState(initialFormState);\n  }, []);\n\n  const toSearchRequest = useCallback((): StorySearchRequest => {\n    return {\n      query: formState.query || undefined,\n      tags: formState.tags.length > 0 ? formState.tags : undefined,\n      topics: formState.topics.length > 0 ? formState.topics : undefined,\n      location: formState.location || undefined,\n      author: formState.author || undefined,\n      minScore: formState.minScore,\n      after: formState.after || undefined,\n      before: formState.before || undefined,\n      sortOrder: formState.sortOrder,\n      page: formState.page,\n      pageSize: formState.pageSize,\n    };\n  }, [formState]);\n\n  return { formState, updateField, resetForm, toSearchRequest };\n};","import React, { useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { SearchForm } from '../components/search/SearchForm';\nimport { SearchFilters } from '../components/search/SearchFilters';\nimport { SearchResults } from '../components/search/SearchResults';\nimport { useSearch, useSearchForm } from '../hooks/useSearch';\nimport { StorySortOrder } from '../types/api';\nimport './Search.css';\n\nexport const Search: React.FC = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { results, loading, error, search, clearResults } = useSearch();\n  const { formState, updateField, resetForm, toSearchRequest } = useSearchForm();\n\n  // Initialize form from URL params on mount\n  useEffect(() => {\n    const query = searchParams.get('q');\n    const tags = searchParams.get('tags');\n    const topics = searchParams.get('topics');\n    const author = searchParams.get('author');\n    const location = searchParams.get('location');\n    const minScore = searchParams.get('minScore');\n    const sortOrder = searchParams.get('sort');\n    const page = searchParams.get('page');\n\n    if (query) updateField('query', query);\n    if (tags) updateField('tags', tags.split(','));\n    if (topics) updateField('topics', topics.split(','));\n    if (author) updateField('author', author);\n    if (location) updateField('location', location);\n    if (minScore) updateField('minScore', parseInt(minScore, 10));\n    if (sortOrder) updateField('sortOrder', sortOrder as StorySortOrder);\n    if (page) updateField('page', parseInt(page, 10));\n\n    // Trigger search if there are params\n    if (query || tags || topics || author || location || minScore) {\n      handleSearch();\n    }\n  }, []); // Only run on mount\n\n  const handleSearch = async () => {\n    const searchRequest = toSearchRequest();\n    await search(searchRequest);\n\n    // Update URL params\n    const params = new URLSearchParams();\n    if (formState.query) params.set('q', formState.query);\n    if (formState.tags.length > 0) params.set('tags', formState.tags.join(','));\n    if (formState.topics.length > 0) params.set('topics', formState.topics.join(','));\n    if (formState.author) params.set('author', formState.author);\n    if (formState.location) params.set('location', formState.location);\n    if (formState.minScore) params.set('minScore', formState.minScore.toString());\n    if (formState.sortOrder !== StorySortOrder.SCORE) params.set('sort', formState.sortOrder);\n    if (formState.page > 1) params.set('page', formState.page.toString());\n\n    setSearchParams(params);\n  };\n\n  const handleReset = () => {\n    resetForm();\n    clearResults();\n    setSearchParams({});\n  };\n\n  const handlePageChange = (page: number) => {\n    updateField('page', page);\n    // Trigger search with new page\n    setTimeout(() => handleSearch(), 0);\n  };\n\n  const handleSortChange = (sortOrder: StorySortOrder) => {\n    updateField('sortOrder', sortOrder);\n    updateField('page', 1); // Reset to first page\n    setTimeout(() => handleSearch(), 0);\n  };\n\nreturn (\n    <div className=\"search-page\">\n      <div className=\"search-page__header\">\n        <h1>Search Stories</h1>\n        <p className=\"search-page__subtitle\">\n          Find stories using advanced filters and search criteria\n        </p>\n      </div>\n\n      <div className=\"search-page__content\">\n        <aside className=\"search-page__sidebar\">\n          <SearchForm\n            formState={formState}\n            updateField={(field, value) => updateField(field as any, value)}\n            onSearch={handleSearch}\n            onReset={handleReset}\n            loading={loading}\n          />\n          <SearchFilters\n            formState={formState}\n            updateField={(field, value) => updateField(field as any, value)}\n            onApply={handleSearch}\n          />\n        </aside>\n\n        <main className=\"search-page__main\">\n          <SearchResults\n            results={results}\n            loading={loading}\n            error={error}\n            sortOrder={formState.sortOrder}\n            onSortChange={handleSortChange}\n            onPageChange={handlePageChange}\n            onRetry={handleSearch}\n          />\n        </main>\n      </div>\n    </div>\n  );\n};","/**\n * Users API Service\n * Handles all user-related API calls\n */\n\nimport { apiClient } from './api';\nimport { ENDPOINTS } from '../config/api.config';\nimport type {\n  User,\n  PaginatedStoryIds,\n  PaginatedCommentIds,\n  PaginationParams,\n} from '../types/api';\n\n/**\n * Users Service\n */\nexport const usersService = {\n  /**\n   * Get user details by username\n   */\n  async getUserByUsername(username: string): Promise<User> {\n    return apiClient.get<User>(ENDPOINTS.USER_DETAIL(username));\n  },\n  /**\n   * Get user details by username (alias for getUserByUsername)\n   */\n  async getUser(username: string): Promise<User> {\n    return this.getUserByUsername(username);\n  },\n\n\n  /**\n   * Get user's submitted stories\n   */\n  async getUserStories(\n    username: string,\n    params?: PaginationParams\n  ): Promise<PaginatedStoryIds> {\n    return apiClient.get<PaginatedStoryIds>(\n      ENDPOINTS.USER_STORIES(username),\n      params\n    );\n  },\n\n  /**\n   * Get user's comments\n   */\n  async getUserComments(\n    username: string,\n    params?: PaginationParams\n  ): Promise<PaginatedCommentIds> {\n    return apiClient.get<PaginatedCommentIds>(\n      ENDPOINTS.USER_COMMENTS(username),\n      params\n    );\n  },\n\n  /**\n   * Get multiple users by usernames\n   */\n  async getUsersByUsernames(usernames: string[]): Promise<User[]> {\n    const promises = usernames.map(username => this.getUserByUsername(username));\n    \n    // Use Promise.allSettled to handle partial failures\n    const results = await Promise.allSettled(promises);\n    \n    return results\n      .filter((result): result is PromiseFulfilledResult<User> => \n        result.status === 'fulfilled'\n      )\n      .map(result => result.value);\n  },\n\n  /**\n   * Check if user exists\n   */\n  async userExists(username: string): Promise<boolean> {\n    try {\n      await this.getUserByUsername(username);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  },\n};\n\nexport default usersService;","import { useState, useEffect, useCallback } from 'react';\nimport { usersService } from '../services/users';\nimport { User, PaginatedStoryIds, PaginatedCommentIds } from '../types/api';\n\ninterface UseUserState {\n  data: User | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\nexport const useUser = (username: string | null): UseUserState => {\n  const [data, setData] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(async () => {\n    if (!username) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await usersService.getUserByUsername(username);\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch user'));\n    } finally {\n      setLoading(false);\n    }\n  }, [username]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n};\n\ninterface UseUserStoriesState {\n  data: PaginatedStoryIds | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\nexport const useUserStories = (\n  username: string | null,\n  page: number = 1,\n  pageSize: number = 5\n): UseUserStoriesState => {\n  const [data, setData] = useState<PaginatedStoryIds | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(async () => {\n    if (!username) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await usersService.getUserStories(username, { page, pageSize });\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch user stories'));\n    } finally {\n      setLoading(false);\n    }\n  }, [username, page, pageSize]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n};\n\ninterface UseUserCommentsState {\n  data: PaginatedCommentIds | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\nexport const useUserComments = (\n  username: string | null,\n  page: number = 1,\n  pageSize: number = 5\n): UseUserCommentsState => {\n  const [data, setData] = useState<PaginatedCommentIds | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(async () => {\n    if (!username) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await usersService.getUserComments(username, { page, pageSize });\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch user comments'));\n    } finally {\n      setLoading(false);\n    }\n  }, [username, page, pageSize]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n};","import React from 'react';\nimport { User } from '../../types/api';\nimport { Badge } from '../common/Badge';\nimport { formatDate } from '../../utils/date';\nimport './UserInfo.css';\n\nexport interface UserInfoProps {\n  user: User;\n}\n\nexport const UserInfo: React.FC<UserInfoProps> = ({ user }) => {\n  return (\n    <div className=\"user-info\">\n      <div className=\"user-info__header\">\n        <h1 className=\"user-info__username\">{user.id}</h1>\n        <div className=\"user-info__meta\">\n          <span className=\"user-info__joined\">\n            Joined {formatDate(user.created)}\n          </span>\n        </div>\n      </div>\n\n      {user.about && (\n        <div className=\"user-info__about\">\n          <p>{user.about}</p>\n        </div>\n      )}\n\n      {user.location && (\n        <div className=\"user-info__location\">\n          <svg\n            className=\"user-info__location-icon\"\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 16 16\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M8 0C5.24 0 3 2.24 3 5C3 8.5 8 14 8 14C8 14 13 8.5 13 5C13 2.24 10.76 0 8 0ZM8 6.5C7.17 6.5 6.5 5.83 6.5 5C6.5 4.17 7.17 3.5 8 3.5C8.83 3.5 9.5 4.17 9.5 5C9.5 5.83 8.83 6.5 8 6.5Z\"\n              fill=\"currentColor\"\n            />\n          </svg>\n          <span>{user.location}</span>\n        </div>\n      )}\n\n      {user.topics.length > 0 && (\n        <div className=\"user-info__topics\">\n          <h3 className=\"user-info__section-title\">Interests</h3>\n          <div className=\"user-info__badges\">\n            {user.topics.map((topic) => (\n              <Badge key={topic} variant=\"secondary\" size=\"small\">\n                {topic}\n              </Badge>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {user.tags.length > 0 && (\n        <div className=\"user-info__tags\">\n          <h3 className=\"user-info__section-title\">Tags</h3>\n          <div className=\"user-info__badges\">\n            {user.tags.map((tag) => (\n              <Badge key={tag} variant=\"outline\" size=\"small\">\n                {tag}\n              </Badge>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};","import React from 'react';\nimport './Card.css';\n\nexport interface CardProps {\n  children: React.ReactNode;\n  className?: string;\n  variant?: 'default' | 'outlined' | 'elevated';\n  padding?: 'none' | 'small' | 'medium' | 'large';\n  hoverable?: boolean;\n  onClick?: () => void;\n}\n\nexport const Card: React.FC<CardProps> = ({\n  children,\n  className = '',\n  variant = 'default',\n  padding = 'medium',\n  hoverable = false,\n  onClick,\n}) => {\n  const classes = [\n    'card',\n    `card--${variant}`,\n    `card--padding-${padding}`,\n    hoverable && 'card--hoverable',\n    onClick && 'card--clickable',\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const Component = onClick ? 'button' : 'div';\n\n  return (\n    <Component className={classes} onClick={onClick} type={onClick ? 'button' : undefined}>\n      {children}\n    </Component>\n  );\n};\n\nexport interface CardHeaderProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const CardHeader: React.FC<CardHeaderProps> = ({ children, className = '' }) => {\n  return <div className={`card__header ${className}`}>{children}</div>;\n};\n\nexport interface CardBodyProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const CardBody: React.FC<CardBodyProps> = ({ children, className = '' }) => {\n  return <div className={`card__body ${className}`}>{children}</div>;\n};\n\nexport interface CardFooterProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const CardFooter: React.FC<CardFooterProps> = ({ children, className = '' }) => {\n  return <div className={`card__footer ${className}`}>{children}</div>;\n};","import React from 'react';\nimport { User } from '../../types/api';\nimport { Card } from '../common/Card';\nimport './UserStats.css';\n\nexport interface UserStatsProps {\n  user: User;\n}\n\nexport const UserStats: React.FC<UserStatsProps> = ({ user }) => {\n  const stats = [\n    {\n      label: 'Karma',\n      value: user.karma.toLocaleString(),\n      icon: (\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z\"\n            fill=\"currentColor\"\n          />\n        </svg>\n      ),\n    },\n    {\n      label: 'Submissions',\n      value: user.submittedIds.length.toLocaleString(),\n      icon: (\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14 17H7V15H14V17ZM17 13H7V11H17V13ZM17 9H7V7H17V9Z\"\n            fill=\"currentColor\"\n          />\n        </svg>\n      ),\n    },\n  ];\n\n  return (\n    <div className=\"user-stats\">\n      {stats.map((stat) => (\n        <Card key={stat.label} className=\"user-stats__card\">\n          <div className=\"user-stats__icon\">{stat.icon}</div>\n          <div className=\"user-stats__content\">\n            <div className=\"user-stats__value\">{stat.value}</div>\n            <div className=\"user-stats__label\">{stat.label}</div>\n          </div>\n        </Card>\n      ))}\n    </div>\n  );\n};","import React from 'react';\nimport { PaginatedStoryIds, PaginatedCommentIds } from '../../types/api';\nimport { StoryList } from '../stories/StoryList';\nimport { CommentList } from '../comments/CommentList';\nimport { Loading } from '../common/Loading';\nimport { Error } from '../common/Error';\nimport { EmptyState } from '../common/EmptyState';\nimport './UserActivity.css';\n\nexport interface UserActivityProps {\n  type: 'stories' | 'comments';\n  data: PaginatedStoryIds | PaginatedCommentIds | null;\n  loading: boolean;\n  error: Error | null;\n  currentPage: number;\n  onPageChange: (page: number) => void;\n  onRetry: () => void;\n}\n\nexport const UserActivity: React.FC<UserActivityProps> = ({\n  type,\n  data,\n  loading,\n  error,\n  currentPage,\n  onPageChange,\n  onRetry,\n}) => {\n  if (loading) {\n    return <Loading size=\"medium\" text={`Loading ${type}...`} />;\n  }\n\n  if (error) {\n    return (\n      <Error\n        message={error.message || `Failed to load ${type}`}\n        onRetry={onRetry}\n      />\n    );\n  }\n\n  if (!data || data.ids.length === 0) {\n    return (\n      <EmptyState\n        message={type === 'stories' ? 'No stories submitted yet' : 'No comments posted yet'}\n      />\n    );\n  }\n\n  const totalPages = Math.ceil(data.totalCount / data.pageSize);\n\n  return (\n    <div className=\"user-activity\">\n      {type === 'stories' ? (\n        <StoryList\n          storyIds={data.ids}\n          currentPage={currentPage}\n          totalPages={totalPages}\n          hasMore={data.hasMore}\n          onPageChange={onPageChange}\n          emptyMessage=\"No stories found\"\n        />\n      ) : (\n        <CommentList\n          commentIds={data.ids}\n          currentPage={currentPage}\n          totalPages={totalPages}\n          hasMore={data.hasMore}\n          onPageChange={onPageChange}\n          showParentContext={true}\n        />\n      )}\n    </div>\n  );\n};","import React, { useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useUser, useUserStories, useUserComments } from '../hooks/useUsers';\nimport { usePagination } from '../hooks/usePagination';\nimport { UserInfo } from '../components/users/UserInfo';\nimport { UserStats } from '../components/users/UserStats';\nimport { UserActivity } from '../components/users/UserActivity';\nimport { Loading } from '../components/common/Loading';\nimport { Error } from '../components/common/Error';\nimport './UserProfile.css';\n\ntype ActivityTab = 'stories' | 'comments';\n\nexport const UserProfile: React.FC = () => {\n  const { username } = useParams<{ username: string }>();\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState<ActivityTab>('stories');\n\n  const { data: user, loading: userLoading, error: userError, refetch: refetchUser } = useUser(username || null);\n\n  const {\n    page: storiesPage,\n    pageSize: storiesPageSize,\n    goToPage: setStoriesPage,\n  } = usePagination();\n\n  const {\n    page: commentsPage,\n    pageSize: commentsPageSize,\n    goToPage: setCommentsPage,\n  } = usePagination();\n\n  const {\n    data: storiesData,\n    loading: storiesLoading,\n    error: storiesError,\n    refetch: refetchStories,\n  } = useUserStories(username || null, storiesPage, storiesPageSize);\n\n  const {\n    data: commentsData,\n    loading: commentsLoading,\n    error: commentsError,\n    refetch: refetchComments,\n  } = useUserComments(username || null, commentsPage, commentsPageSize);\n\n  if (userLoading) {\n    return <Loading size=\"large\" text=\"Loading user profile...\" />;\n  }\n\n  if (userError) {\n    return (\n      <div className=\"user-profile-error\">\n        <Error\n          message={userError.message || 'Failed to load user profile'}\n          onRetry={refetchUser}\n        />\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"user-profile-error\">\n        <Error\n          message=\"User not found\"\n          onRetry={() => navigate('/')}\n          retryText=\"Go Home\"\n        />\n      </div>\n    );\n  }\n\n  const handleTabChange = (tab: ActivityTab) => {\n    setActiveTab(tab);\n    if (tab === 'stories') {\n      setStoriesPage(1);\n    } else {\n      setCommentsPage(1);\n    }\n  };\n\n  return (\n    <div className=\"user-profile\">\n      <div className=\"user-profile__header\">\n        <UserInfo user={user} />\n        <UserStats user={user} />\n      </div>\n\n      <div className=\"user-profile__activity\">\n        <div className=\"user-profile__tabs\">\n          <button\n            className={`user-profile__tab ${activeTab === 'stories' ? 'user-profile__tab--active' : ''}`}\n            onClick={() => handleTabChange('stories')}\n          >\n            Stories ({user.submittedIds.length})\n          </button>\n          <button\n            className={`user-profile__tab ${activeTab === 'comments' ? 'user-profile__tab--active' : ''}`}\n            onClick={() => handleTabChange('comments')}\n          >\n            Comments\n          </button>\n        </div>\n\n        <div className=\"user-profile__content\">\n          {activeTab === 'stories' && (\n            <UserActivity\n              type=\"stories\"\n              data={storiesData}\n              loading={storiesLoading}\n              error={storiesError}\n              currentPage={storiesPage}\n              onPageChange={setStoriesPage}\n              onRetry={refetchStories}\n            />\n          )}\n\n          {activeTab === 'comments' && (\n            <UserActivity\n              type=\"comments\"\n              data={commentsData}\n              loading={commentsLoading}\n              error={commentsError}\n              currentPage={commentsPage}\n              onPageChange={setCommentsPage}\n              onRetry={refetchComments}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button } from '../components/common/Button';\nimport './NotFound.css';\n\nexport const NotFound: React.FC = () => {\n  return (\n    <div className=\"not-found\">\n      <div className=\"not-found__content\">\n        <div className=\"not-found__icon\">\n          <svg\n            width=\"120\"\n            height=\"120\"\n            viewBox=\"0 0 120 120\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <circle\n              cx=\"60\"\n              cy=\"60\"\n              r=\"50\"\n              stroke=\"currentColor\"\n              strokeWidth=\"4\"\n              fill=\"none\"\n            />\n            <path\n              d=\"M40 50C40 47.7909 41.7909 46 44 46H46C48.2091 46 50 47.7909 50 50V52C50 54.2091 48.2091 56 46 56H44C41.7909 56 40 54.2091 40 52V50Z\"\n              fill=\"currentColor\"\n            />\n            <path\n              d=\"M70 50C70 47.7909 71.7909 46 74 46H76C78.2091 46 80 47.7909 80 50V52C80 54.2091 78.2091 56 76 56H74C71.7909 56 70 54.2091 70 52V50Z\"\n              fill=\"currentColor\"\n            />\n            <path\n              d=\"M40 75C40 75 45 70 60 70C75 70 80 75 80 75\"\n              stroke=\"currentColor\"\n              strokeWidth=\"4\"\n              strokeLinecap=\"round\"\n            />\n          </svg>\n        </div>\n\n        <h1 className=\"not-found__title\">404</h1>\n        <h2 className=\"not-found__subtitle\">Page Not Found</h2>\n        <p className=\"not-found__message\">\n          Sorry, the page you're looking for doesn't exist or has been moved.\n        </p>\n\n        <div className=\"not-found__actions\">\n          <Link to=\"/\">\n            <Button variant=\"primary\" size=\"large\">\n              Go to Home\n            </Button>\n          </Link>\n          <Button\n            variant=\"secondary\"\n            size=\"large\"\n            onClick={() => window.history.back()}\n          >\n            Go Back\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};","import { createBrowserRouter, Navigate } from 'react-router-dom';\nimport Layout from '../components/layout/Layout';\nimport { Home } from '../pages/Home';\nimport { NewStories } from '../pages/NewStories';\nimport { StoryDetail } from '../pages/StoryDetail';\nimport { Search } from '../pages/Search';\nimport { UserProfile } from '../pages/UserProfile';\nimport { NotFound } from '../pages/NotFound';\n\n/**\n * Application router configuration\n * Defines all routes and their corresponding components\n */\nexport const router = createBrowserRouter([\n  {\n    path: '/',\n    element: <Layout />,\n    errorElement: <NotFound />,\n    children: [\n      {\n        index: true,\n        element: <Home />,\n      },\n      {\n        path: 'new',\n        element: <NewStories />,\n      },\n      {\n        path: 'story/:id',\n        element: <StoryDetail />,\n      },\n      {\n        path: 'search',\n        element: <Search />,\n      },\n      {\n        path: 'user/:username',\n        element: <UserProfile />,\n      },\n      {\n        path: '404',\n        element: <NotFound />,\n      },\n      {\n        path: '*',\n        element: <Navigate to=\"/404\" replace />,\n      },\n    ],\n  },\n]);\n\n/**\n * Route path constants for type-safe navigation\n */\nexport const ROUTES = {\n  HOME: '/',\n  NEW: '/new',\n  STORY: (id: number | string) => `/story/${id}`,\n  SEARCH: '/search',\n  USER: (username: string) => `/user/${username}`,\n  NOT_FOUND: '/404',\n} as const;","import { Component, ErrorInfo, ReactNode } from 'react';\nimport { Error } from './Error';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return {\n      hasError: true,\n      error,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n    \n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n  }\n\n  handleReset = (): void => {\n    this.setState({\n      hasError: false,\n      error: null,\n    });\n  };\n\n  render(): ReactNode {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <Error\n          title=\"Application Error\"\n          message={\n            this.state.error?.message ||\n            'An unexpected error occurred. Please try refreshing the page.'\n          }\n          onRetry={this.handleReset}\n          variant=\"page\"\n        />\n      );\n    }\n\n    return this.props.children;\n  }\n}","import { RouterProvider } from 'react-router-dom';\n import { router } from './routes';\nimport { ErrorBoundary } from './components/common/ErrorBoundary';\nimport './styles/global.css';\n\n/**\n * Root application component\n * Sets up routing and global error boundary\n */\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <RouterProvider router={router} />\n    </ErrorBoundary>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './styles/reset.css';\nimport './styles/variables.css';\nimport './styles/global.css';\n\n/**\n * Application entry point\n * Initializes React and mounts the root component\n */\nconst rootElement = document.getElementById('root');\n\nif (!rootElement) {\n  throw new Error('Failed to find the root element');\n}\n\nReactDOM.createRoot(rootElement).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","Header","navigate","useNavigate","handleSearchSubmit","query","ROUTES","jsxs","jsx","Link","NavLink","isActive","Footer","currentYear","Layout","Outlet","API_CONFIG","ENDPOINTS","id","username","ApiError","message","status","statusText","data","buildUrl","endpoint","params","baseUrl","fullPath","url","key","value","handleResponse","response","errorData","contentType","request","options","fetchOptions","config","error","apiClient","storiesService","ids","promises","signal","result","useTopStories","page","pageSize","setData","useState","loading","setLoading","setError","fetchData","useCallback","err","useEffect","useNewStories","useStory","useStoryComments","storyId","useBatchStories","stories","setStories","fetchStories","results","newStories","index","usePagination","initialPage","initialPageSize","totalCount","setPage","setPageSize","totalPages","useMemo","hasNextPage","hasPreviousPage","goToPage","newPage","nextPage","prev","previousPage","handleSetPageSize","size","reset","formatRelativeTime","date","now","then","diffInSeconds","diffInMinutes","diffInHours","diffInDays","diffInMonths","diffInYears","formatTimeAgo","formatDate","StoryMeta","story","showCommentCount","className","timeAgo","Fragment","Badge","children","variant","classes","extractDomain","formatUrl","StoryItem","rank","showFullContent","isExternalLink","domain","tag","Button","fullWidth","disabled","icon","iconPosition","props","Pagination","currentPage","onPageChange","hasMore","getPageNumbers","pages","i","handlePrevious","handleNext","Loading","text","fullScreen","Error","title","onRetry","retryText","EmptyState","description","action","displayTitle","StoryList","storyIds","emptyMessage","storiesLoading","storiesError","storyList","Home","calculatedTotalPages","NewStories","StoryContent","topic","CommentItem","comment","level","onToggleCollapse","isCollapsed","isExpanded","setIsExpanded","hasChildren","handleToggle","CommentThread","allComments","maxLevel","setIsCollapsed","shouldNest","childId","childComment","LoadingInline","commentsService","childComments","comments","commentMap","rootComments","commentWithChildren","parent","useBatchComments","setComments","fetchComments","prevComments","newComments","clearComments","CommentList","commentIds","React","commentId","LoadingPage","StoryDetail","useParams","storyLoading","storyError","refetchStory","commentsData","commentsLoading","commentsError","refetchComments","StorySortOrder","SearchForm","formState","updateField","onSearch","onReset","handleSubmit","SearchFilters","onApply","tagInput","setTagInput","topicInput","setTopicInput","handleAddTag","handleRemoveTag","t","handleAddTopic","handleRemoveTopic","handleKeyPress","handler","SearchResults","sortOrder","onSortChange","useSearch","debounceMs","setResults","debounceTimerRef","useRef","search","clearResults","initialFormState","useSearchForm","setFormState","field","resetForm","toSearchRequest","Search","searchParams","setSearchParams","useSearchParams","tags","topics","author","location","minScore","handleSearch","searchRequest","handleReset","handlePageChange","handleSortChange","usersService","usernames","useUser","useUserStories","useUserComments","UserInfo","user","Card","padding","hoverable","onClick","Component","UserStats","stats","stat","UserActivity","type","UserProfile","activeTab","setActiveTab","userLoading","userError","refetchUser","storiesPage","storiesPageSize","setStoriesPage","commentsPage","commentsPageSize","setCommentsPage","storiesData","refetchStories","handleTabChange","tab","NotFound","router","createBrowserRouter","Navigate","ErrorBoundary","__publicField","errorInfo","_a","App","RouterProvider","rootElement","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1,2]}