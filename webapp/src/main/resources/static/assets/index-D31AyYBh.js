var ce=Object.defineProperty;var de=(s,t,a)=>t in s?ce(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var V=(s,t,a)=>de(s,typeof t!="symbol"?t+"":t,a);import{r as d,a as he,u as Q,L as S,N as A,O as me,R as X,b as ee,c as ue,d as fe,e as _e,f as xe}from"./react-vendor-QnjUeApa.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();var se={exports:{}},B={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pe=d,ge=Symbol.for("react.element"),je=Symbol.for("react.fragment"),Ne=Object.prototype.hasOwnProperty,ve=pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ye={key:!0,ref:!0,__self:!0,__source:!0};function te(s,t,a){var n,r={},i=null,o=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Ne.call(t,n)&&!ye.hasOwnProperty(n)&&(r[n]=t[n]);if(s&&s.defaultProps)for(n in t=s.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:ge,type:s,key:i,ref:o,props:r,_owner:ve.current}}B.Fragment=je;B.jsx=te;B.jsxs=te;se.exports=B;var e=se.exports,z={},Z=he;z.createRoot=Z.createRoot,z.hydrateRoot=Z.hydrateRoot;const Se=()=>{const s=Q(),t=a=>{a.preventDefault();const r=new FormData(a.currentTarget).get("q");r.trim()&&(s(`${I.SEARCH}?q=${encodeURIComponent(r.trim())}`),a.currentTarget.reset())};return e.jsx("header",{className:"header",children:e.jsxs("div",{className:"header__container",children:[e.jsx("div",{className:"header__brand",children:e.jsxs(S,{to:I.HOME,className:"header__logo",children:[e.jsx("span",{className:"header__logo-icon",children:"ðŸ“°"}),e.jsx("span",{className:"header__logo-text",children:"News"})]})}),e.jsxs("nav",{className:"header__nav",children:[e.jsx(A,{to:I.HOME,className:({isActive:a})=>`header__nav-link ${a?"header__nav-link--active":""}`,end:!0,children:"Top"}),e.jsx(A,{to:I.NEW,className:({isActive:a})=>`header__nav-link ${a?"header__nav-link--active":""}`,children:"New"}),e.jsx(A,{to:I.SEARCH,className:({isActive:a})=>`header__nav-link ${a?"header__nav-link--active":""}`,children:"Search"})]}),e.jsxs("form",{className:"header__search",onSubmit:t,children:[e.jsx("input",{type:"search",name:"q",placeholder:"Search stories...",className:"header__search-input","aria-label":"Search stories"}),e.jsx("button",{type:"submit",className:"header__search-button","aria-label":"Submit search",children:"ðŸ”"})]})]})})},Ce=()=>{const s=new Date().getFullYear();return e.jsx("footer",{className:"footer",children:e.jsx("div",{className:"footer__container",children:e.jsxs("div",{className:"footer__content",children:[e.jsxs("p",{className:"footer__text",children:["Â© ",s," News App. Built with React & TypeScript."]}),e.jsxs("div",{className:"footer__links",children:[e.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"footer__link",children:"GitHub"}),e.jsx("span",{className:"footer__separator",children:"â€¢"}),e.jsx("a",{href:"/api",target:"_blank",rel:"noopener noreferrer",className:"footer__link",children:"API Docs"})]})]})})})},be=()=>e.jsxs("div",{className:"layout",children:[e.jsx(Se,{}),e.jsx("main",{className:"layout__main",children:e.jsx("div",{className:"layout__container",children:e.jsx(me,{})})}),e.jsx(Ce,{})]}),F={BASE_URL:"http://localhost:8080/"},N={STORIES_TOP:"/api/stories/top",STORIES_NEW:"/api/stories/new",STORY_DETAIL:s=>`/api/stories/${s}`,STORY_COMMENTS:s=>`/api/stories/${s}/comments`,STORIES_SEARCH:"/api/stories/search",COMMENT_DETAIL:s=>`/api/comments/${s}`,USER_DETAIL:s=>`/api/users/${s}`,USER_STORIES:s=>`/api/users/${s}/stories`,USER_COMMENTS:s=>`/api/users/${s}/comments`};class H extends Error{constructor(t,a,n,r){super(t),this.status=a,this.statusText=n,this.data=r,this.name="ApiError"}}function Ee(s,t){const a=F.BASE_URL.startsWith("http")?F.BASE_URL:window.location.origin+F.BASE_URL,n=s.startsWith("/")?s:`/${s}`,r=new URL(n,a);return t&&Object.entries(t).forEach(([i,o])=>{o!=null&&r.searchParams.append(i,String(o))}),r.toString()}async function we(s){if(!s.ok){let a;try{a=await s.json()}catch{a=await s.text()}throw new H(`API request failed: ${s.statusText}`,s.status,s.statusText,a)}const t=s.headers.get("content-type");return t&&t.includes("application/json")?s.json():s.text()}async function O(s,t={}){const{params:a,...n}=t,r=Ee(s,a),i={...n,headers:{"Content-Type":"application/json",...n.headers}};try{const o=await fetch(r,i);return we(o)}catch(o){throw o instanceof H?o:new H(o instanceof Error?o.message:"Network request failed",0,"Network Error")}}const v={get(s,t,a){return O(s,{...a,method:"GET",params:t})},post(s,t,a){return O(s,{...a,method:"POST",body:t?JSON.stringify(t):void 0})},put(s,t,a){return O(s,{...a,method:"PUT",body:t?JSON.stringify(t):void 0})},patch(s,t,a){return O(s,{...a,method:"PATCH",body:t?JSON.stringify(t):void 0})},delete(s,t){return O(s,{...t,method:"DELETE"})}},E={async getTopStories(s){return v.get(N.STORIES_TOP,s)},async getNewStories(s){return v.get(N.STORIES_NEW,s)},async getStoryById(s){return v.get(N.STORY_DETAIL(s))},async getStory(s){return this.getStoryById(s)},async getStoriesByIds(s){const t=s.map(a=>this.getStoryById(a));return Promise.all(t)},async getStoryComments(s,t){return v.get(N.STORY_COMMENTS(s),t)},async searchStories(s){return v.post(N.STORIES_SEARCH,s)},async getStoriesWithDetails(s,t){const a=s.map(r=>v.get(N.STORY_DETAIL(r),void 0,{signal:t}));return(await Promise.allSettled(a)).filter(r=>r.status==="fulfilled").map(r=>r.value)}},Te=(s=1,t=5)=>{const[a,n]=d.useState(null),[r,i]=d.useState(!0),[o,c]=d.useState(null),l=d.useCallback(async()=>{try{i(!0),c(null);const h=await E.getTopStories({page:s,pageSize:t});n(h)}catch(h){c(h instanceof Error?h:new Error("Failed to fetch top stories"))}finally{i(!1)}},[s,t]);return d.useEffect(()=>{l()},[l]),{data:a,loading:r,error:o,refetch:l}},ke=(s=1,t=5)=>{const[a,n]=d.useState(null),[r,i]=d.useState(!0),[o,c]=d.useState(null),l=d.useCallback(async()=>{try{i(!0),c(null);const h=await E.getNewStories({page:s,pageSize:t});n(h)}catch(h){c(h instanceof Error?h:new Error("Failed to fetch new stories"))}finally{i(!1)}},[s,t]);return d.useEffect(()=>{l()},[l]),{data:a,loading:r,error:o,refetch:l}},Le=s=>{const[t,a]=d.useState(null),[n,r]=d.useState(!0),[i,o]=d.useState(null),c=d.useCallback(async()=>{if(!s){r(!1);return}try{r(!0),o(null);const l=await E.getStory(s);a(l)}catch(l){o(l instanceof Error?l:new Error("Failed to fetch story"))}finally{r(!1)}},[s]);return d.useEffect(()=>{c()},[c]),{data:t,loading:n,error:i,refetch:c}},Re=(s,t=1,a=5)=>{const[n,r]=d.useState(null),[i,o]=d.useState(!0),[c,l]=d.useState(null),h=d.useCallback(async()=>{if(!s){o(!1);return}try{o(!0),l(null);const m=await E.getStoryComments(s,{page:t,pageSize:a});r(m)}catch(m){l(m instanceof Error?m:new Error("Failed to fetch story comments"))}finally{o(!1)}},[s,t,a]);return d.useEffect(()=>{h()},[h]),{data:n,loading:i,error:c,refetch:h}},Me=()=>{const[s,t]=d.useState(new Map),[a,n]=d.useState(!1),[r,i]=d.useState(null),o=d.useCallback(async c=>{try{n(!0),i(null);const l=await Promise.allSettled(c.map(m=>E.getStory(m))),h=new Map(s);l.forEach((m,f)=>{m.status==="fulfilled"&&h.set(c[f],m.value)}),t(h)}catch(l){if(l instanceof Error&&l.name==="AbortError")return;i(l instanceof Error?l:new Error("Failed to fetch stories"))}finally{n(!1)}},[s]);return{stories:s,loading:a,error:r,fetchStories:o}},$=({initialPage:s=1,initialPageSize:t=5,totalCount:a=0}={})=>{const[n,r]=d.useState(s),[i,o]=d.useState(t),c=d.useMemo(()=>Math.ceil(a/i)||1,[a,i]),l=d.useMemo(()=>n<c,[n,c]),h=d.useMemo(()=>n>1,[n]),m=d.useCallback(_=>{r(Math.max(1,Math.min(_,c)))},[c]),f=d.useCallback(()=>{l&&r(_=>_+1)},[l]),u=d.useCallback(()=>{h&&r(_=>_-1)},[h]),p=d.useCallback(_=>{o(_),r(1)},[]),j=d.useCallback(()=>{r(s),o(t)},[s,t]);return{page:n,pageSize:i,totalPages:c,hasNextPage:l,hasPreviousPage:h,goToPage:m,nextPage:f,previousPage:u,setPageSize:p,reset:j}};function Oe(s){const t=new Date,a=typeof s=="string"?new Date(s):s,n=Math.floor((t.getTime()-a.getTime())/1e3);if(n<60)return"just now";const r=Math.floor(n/60);if(r<60)return`${r} minute${r!==1?"s":""} ago`;const i=Math.floor(r/60);if(i<24)return`${i} hour${i!==1?"s":""} ago`;const o=Math.floor(i/24);if(o<30)return`${o} day${o!==1?"s":""} ago`;const c=Math.floor(o/30);if(c<12)return`${c} month${c!==1?"s":""} ago`;const l=Math.floor(c/12);return`${l} year${l!==1?"s":""} ago`}const re=Oe;function Ie(s){return(typeof s=="string"?new Date(s):s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}const ae=({story:s,showCommentCount:t=!0,className:a=""})=>{const n=re(s.timestamp);return e.jsxs("div",{className:`story-meta ${a}`,children:[e.jsxs("span",{className:"story-meta__item story-meta__score",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),e.jsxs("span",{children:[s.score," points"]})]}),e.jsx("span",{className:"story-meta__separator",children:"â€¢"}),e.jsxs(S,{to:`/user/${s.author}`,className:"story-meta__item story-meta__author",children:["by ",s.author]}),e.jsx("span",{className:"story-meta__separator",children:"â€¢"}),e.jsx("time",{className:"story-meta__item story-meta__time",dateTime:s.timestamp,children:n}),t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"story-meta__separator",children:"â€¢"}),e.jsxs(S,{to:`/story/${s.id}`,className:"story-meta__item story-meta__comments",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),e.jsxs("span",{children:[s.commentCount," ",s.commentCount===1?"comment":"comments"]})]})]}),s.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"story-meta__separator",children:"â€¢"}),e.jsxs("span",{className:"story-meta__item story-meta__location",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("span",{children:s.location})]})]}),s.topics.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"story-meta__separator",children:"â€¢"}),e.jsx("span",{className:"story-meta__item story-meta__topics",children:s.topics.slice(0,2).join(", ")})]})]})},b=({children:s,variant:t="default",size:a="medium",className:n=""})=>{const r=["badge",`badge--${t}`,`badge--${a}`,n].filter(Boolean).join(" ");return e.jsx("span",{className:r,children:s})};function Pe(s){try{return new URL(s).hostname.replace(/^www\./,"")}catch{return""}}const ne=Pe,$e=({story:s,rank:t,showFullContent:a=!1,className:n=""})=>{const r=s.url!==null,i=s.url?ne(s.url):null;return e.jsx("article",{className:`story-item ${n}`,children:e.jsxs("div",{className:"story-item__content",children:[t&&e.jsxs("div",{className:"story-item__rank",children:[t,"."]}),e.jsxs("div",{className:"story-item__main",children:[e.jsxs("div",{className:"story-item__header",children:[e.jsx("h2",{className:"story-item__title",children:r?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"story-item__link story-item__link--external",children:s.title}),i&&e.jsxs("span",{className:"story-item__domain",children:["(",i,")"]})]}):e.jsx(S,{to:`/story/${s.id}`,className:"story-item__link",children:s.title})}),s.tags.length>0&&e.jsx("div",{className:"story-item__tags",children:s.tags.slice(0,3).map(o=>e.jsx(b,{variant:"secondary",size:"small",children:o},o))})]}),a&&s.text&&e.jsx("div",{className:"story-item__text",dangerouslySetInnerHTML:{__html:s.text}}),e.jsx(ae,{story:s})]})]})})},g=({children:s,variant:t="primary",size:a="medium",fullWidth:n=!1,loading:r=!1,disabled:i=!1,icon:o,iconPosition:c="left",className:l="",...h})=>{const m=["button",`button--${t}`,`button--${a}`,n&&"button--full-width",r&&"button--loading",l].filter(Boolean).join(" ");return e.jsxs("button",{className:m,disabled:i||r,...h,children:[r&&e.jsx("span",{className:"button__spinner","aria-hidden":"true",children:e.jsx("span",{className:"spinner"})}),!r&&o&&c==="left"&&e.jsx("span",{className:"button__icon button__icon--left",children:o}),s&&e.jsx("span",{className:"button__text",children:s}),!r&&o&&c==="right"&&e.jsx("span",{className:"button__icon button__icon--right",children:o})]})},De=({currentPage:s,totalPages:t,onPageChange:a,hasMore:n=!1,className:r=""})=>{const i=()=>{const l=[];if(t<=7)for(let m=1;m<=t;m++)l.push(m);else if(s<=4){for(let m=1;m<=5;m++)l.push(m);l.push("..."),l.push(t)}else if(s>=t-3){l.push(1),l.push("...");for(let m=t-4;m<=t;m++)l.push(m)}else{l.push(1),l.push("...");for(let m=s-1;m<=s+1;m++)l.push(m);l.push("..."),l.push(t)}return l},o=()=>{s>1&&a(s-1)},c=()=>{(s<t||n)&&a(s+1)};return t<=1&&!n?null:e.jsxs("nav",{className:`pagination ${r}`,"aria-label":"Pagination",children:[e.jsxs(g,{variant:"ghost",size:"small",onClick:o,disabled:s===1,"aria-label":"Previous page",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Previous"]}),e.jsx("div",{className:"pagination__pages",children:i().map((l,h)=>l==="..."?e.jsx("span",{className:"pagination__ellipsis",children:"..."},`ellipsis-${h}`):e.jsx(g,{variant:s===l?"primary":"ghost",size:"small",onClick:()=>a(l),"aria-label":`Page ${l}`,"aria-current":s===l?"page":void 0,children:l},l))}),e.jsxs(g,{variant:"ghost",size:"small",onClick:c,disabled:!n&&s===t,"aria-label":"Next page",children:["Next",e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})})]})]})},w=({size:s="medium",text:t,fullScreen:a=!1,className:n=""})=>{const r=["loading",`loading--${s}`,a&&"loading--fullscreen",n].filter(Boolean).join(" ");return e.jsxs("div",{className:r,role:"status","aria-live":"polite",children:[e.jsx("div",{className:"spinner","aria-hidden":"true",children:e.jsx("div",{className:"spinner__circle"})}),t&&e.jsx("p",{className:"loading__text",children:t}),e.jsx("span",{className:"sr-only",children:"Loading..."})]})},C=({title:s="Something went wrong",message:t,onRetry:a,retryText:n="Try Again",className:r="",variant:i="inline"})=>{const o=["error",`error--${i}`,r].filter(Boolean).join(" ");return e.jsxs("div",{className:o,role:"alert",children:[e.jsx("div",{className:"error__icon","aria-hidden":"true",children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsxs("div",{className:"error__content",children:[e.jsx("h3",{className:"error__title",children:s}),e.jsx("p",{className:"error__message",children:t}),a&&e.jsx("div",{className:"error__actions",children:e.jsx(g,{onClick:a,variant:"primary",children:n})})]})]})},D=({icon:s,title:t,description:a,message:n,action:r,className:i=""})=>{const o=t||n||"No items found";return e.jsxs("div",{className:`empty-state ${i}`,children:[s&&e.jsx("div",{className:"empty-state__icon",children:s}),e.jsx("h3",{className:"empty-state__title",children:o}),a&&e.jsx("p",{className:"empty-state__description",children:a}),r&&e.jsx("div",{className:"empty-state__action",children:e.jsx(g,{onClick:r.onClick,variant:"primary",children:r.label})})]})},U=({storyIds:s,currentPage:t,totalPages:a,hasMore:n,onPageChange:r,loading:i=!1,error:o=null,emptyMessage:c="No stories found",className:l=""})=>{const{stories:h,loading:m,error:f,fetchStories:u}=Me();if(d.useEffect(()=>{s.length>0&&u(s)},[s.join(",")]),i||m)return e.jsx(w,{size:"large",text:"Loading stories..."});if(o||f)return e.jsx(C,{message:(o==null?void 0:o.message)||(f==null?void 0:f.message)||"Failed to load stories",onRetry:()=>u(s)});if(s.length===0)return e.jsx(D,{message:c});const p=s.map(j=>h.get(j)).filter(j=>j!==void 0);return e.jsxs("div",{className:`story-list ${l}`,children:[e.jsx("div",{className:"story-list__items",children:p.map((j,_)=>e.jsx($e,{story:j,rank:t>1?(t-1)*s.length+_+1:_+1},j.id))}),e.jsx(De,{currentPage:t,totalPages:a,hasMore:n,onPageChange:r,className:"story-list__pagination"})]})},Be=()=>{const{page:s,pageSize:t,goToPage:a,totalPages:n}=$(),{data:r,loading:i,error:o}=Te(s,t),c=r?Math.ceil(r.totalCount/r.pageSize):n;return e.jsxs("div",{className:"home",children:[e.jsxs("div",{className:"home__header",children:[e.jsx("h1",{className:"home__title",children:"Top Stories"}),e.jsx("p",{className:"home__subtitle",children:"The best stories from around the web, ranked by score"})]}),e.jsx(U,{storyIds:(r==null?void 0:r.ids)||[],currentPage:s,totalPages:c,hasMore:(r==null?void 0:r.hasMore)||!1,onPageChange:a,loading:i,error:o,emptyMessage:"No top stories available at the moment",className:"home__story-list"})]})},Ue=()=>{const{page:s,pageSize:t,goToPage:a,totalPages:n}=$(),{data:r,loading:i,error:o}=ke(s,t),c=r?Math.ceil(r.totalCount/r.pageSize):n;return e.jsxs("div",{className:"new-stories",children:[e.jsxs("div",{className:"new-stories__header",children:[e.jsx("h1",{className:"new-stories__title",children:"New Stories"}),e.jsx("p",{className:"new-stories__subtitle",children:"The latest stories submitted to the platform"})]}),e.jsx(U,{storyIds:(r==null?void 0:r.ids)||[],currentPage:s,totalPages:c,hasMore:(r==null?void 0:r.hasMore)||!1,onPageChange:a,loading:i,error:o,emptyMessage:"No new stories available at the moment",className:"new-stories__story-list"})]})},Ae=({story:s})=>{const t=s.url!==null,a=s.url?ne(s.url):null;return e.jsxs("article",{className:"story-content",children:[e.jsxs("header",{className:"story-content__header",children:[e.jsx("h1",{className:"story-content__title",children:t?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"story-content__link",children:s.title}),a&&e.jsxs("span",{className:"story-content__domain",children:["(",a,")"]})]}):s.title}),(s.tags.length>0||s.topics.length>0)&&e.jsxs("div",{className:"story-content__badges",children:[s.tags.map(n=>e.jsx(b,{variant:"primary",size:"medium",children:n},n)),s.topics.map(n=>e.jsx(b,{variant:"secondary",size:"medium",children:n},n))]}),e.jsx(ae,{story:s,showCommentCount:!1})]}),s.text&&e.jsx("div",{className:"story-content__text",dangerouslySetInnerHTML:{__html:s.text}}),s.location&&e.jsxs("div",{className:"story-content__location",children:[e.jsx("svg",{className:"story-content__location-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 0C5.24 0 3 2.24 3 5C3 8.5 8 14 8 14C8 14 13 8.5 13 5C13 2.24 10.76 0 8 0ZM8 6.5C7.17 6.5 6.5 5.83 6.5 5C6.5 4.17 7.17 3.5 8 3.5C8.83 3.5 9.5 4.17 9.5 5C9.5 5.83 8.83 6.5 8 6.5Z",fill:"currentColor"})}),s.location]})]})},Fe=({comment:s,level:t,onToggleCollapse:a,isCollapsed:n=!1})=>{const[r,i]=d.useState(!0),o=s.childCommentIds.length>0,c=()=>{a?a():i(!r)};return e.jsxs("div",{className:`comment-item comment-item--level-${Math.min(t,5)}`,children:[e.jsxs("div",{className:"comment-item__header",children:[e.jsx("button",{className:"comment-item__collapse-btn",onClick:c,"aria-label":n?"Expand comment":"Collapse comment",children:n?"+":"âˆ’"}),e.jsxs("div",{className:"comment-item__meta",children:[e.jsx(S,{to:`/user/${s.author}`,className:"comment-item__author",children:s.author}),e.jsx("span",{className:"comment-item__separator",children:"â€¢"}),e.jsx("time",{className:"comment-item__time",dateTime:s.timestamp,title:new Date(s.timestamp).toLocaleString(),children:re(s.timestamp)}),s.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"comment-item__separator",children:"â€¢"}),e.jsx("span",{className:"comment-item__location",children:s.location})]})]}),s.tags.length>0&&e.jsx("div",{className:"comment-item__tags",children:s.tags.slice(0,2).map(l=>e.jsx(b,{variant:"secondary",size:"small",children:l},l))})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"comment-item__text",dangerouslySetInnerHTML:{__html:s.text}}),o&&e.jsx("div",{className:"comment-item__footer",children:e.jsxs("span",{className:"comment-item__reply-count",children:[s.childCommentIds.length," ",s.childCommentIds.length===1?"reply":"replies"]})})]}),n&&o&&e.jsxs("div",{className:"comment-item__collapsed-info",children:[s.childCommentIds.length," hidden"," ",s.childCommentIds.length===1?"reply":"replies"]})]})},oe=({comment:s,allComments:t,level:a,maxLevel:n=10})=>{const[r,i]=d.useState(!1),o=s.childCommentIds.length>0,c=a<n;return e.jsxs("div",{className:"comment-thread",children:[e.jsx(Fe,{comment:s,level:a,onToggleCollapse:()=>i(!r),isCollapsed:r}),!r&&o&&c&&e.jsx("div",{className:"comment-thread__children",children:s.childCommentIds.map(l=>{const h=t.get(l);return h?e.jsx(oe,{comment:h,allComments:t,level:a+1,maxLevel:n},l):null})})]})},ze=({text:s,message:t,size:a="medium",className:n=""})=>e.jsx("div",{className:`loading-inline ${n}`,children:e.jsx(w,{size:a,text:t||s})}),He={async getCommentById(s){return v.get(N.COMMENT_DETAIL(s))},async getComment(s){return this.getCommentById(s)},async getCommentsByIds(s){const t=s.map(a=>this.getCommentById(a));return Promise.all(t)},async getCommentThread(s){const t=await this.getCommentById(s);if(t.childCommentIds.length>0){const a=await this.getCommentsByIds(t.childCommentIds);return{...t,children:a}}return t},async getCommentsWithDetails(s,t){const a=s.map(r=>v.get(N.COMMENT_DETAIL(r),void 0,{signal:t}));return(await Promise.allSettled(a)).filter(r=>r.status==="fulfilled").map(r=>r.value)},buildCommentTree(s){const t=new Map,a=[];return s.forEach(n=>{t.set(n.id,{...n,children:[]})}),s.forEach(n=>{const r=t.get(n.id);if(!r)return;const i=t.get(n.parentId);i&&i.children?i.children.push(r):a.push(r)}),a}},qe=()=>{const[s,t]=d.useState(new Map),[a,n]=d.useState(!1),[r,i]=d.useState(null),o=d.useCallback(async l=>{if(l.length!==0)try{n(!0),i(null);const h=await Promise.allSettled(l.map(m=>He.getComment(m)));t(m=>{const f=new Map(m);return h.forEach((u,p)=>{u.status==="fulfilled"&&f.set(l[p],u.value)}),f})}catch(h){i(h instanceof Error?h:new Error("Failed to fetch comments"))}finally{n(!1)}},[]),c=d.useCallback(()=>{t(new Map)},[]);return{comments:s,loading:a,error:r,fetchComments:o,clearComments:c}},ie=({commentIds:s,className:t=""})=>{const{comments:a,loading:n,error:r,fetchComments:i}=qe();return X.useEffect(()=>{s.length>0&&i(s)},[s,i]),n&&a.size===0?e.jsx(ze,{message:"Loading comments..."}):r&&a.size===0?e.jsx("div",{className:"comment-list__error",children:"Failed to load comments. Please try again."}):e.jsx("div",{className:`comment-list ${t}`,children:s.map(o=>{const c=a.get(o);return c?e.jsx(oe,{comment:c,allComments:a,level:0},o):null})})},Y=({text:s="Loading...",message:t})=>e.jsx("div",{className:"loading-page",children:e.jsx(w,{size:"large",text:t||s,fullScreen:!0})}),We=()=>{const{id:s}=ee(),t=s?parseInt(s,10):null,{data:a,loading:n,error:r,refetch:i}=Le(t),{data:o,loading:c,error:l,refetch:h}=Re(t,1,100);return d.useEffect(()=>{window.scrollTo(0,0)},[s]),n?e.jsx(Y,{message:"Loading story..."}):r||!a?e.jsxs("div",{className:"story-detail__error-container",children:[e.jsx(C,{message:(r==null?void 0:r.message)||"Story not found",onRetry:i}),e.jsx(S,{to:"/",className:"story-detail__back-link",children:e.jsx(g,{variant:"secondary",children:"â† Back to Home"})})]}):e.jsxs("div",{className:"story-detail",children:[e.jsx("div",{className:"story-detail__header",children:e.jsx(S,{to:"/",className:"story-detail__back-link",children:e.jsx(g,{variant:"ghost",size:"small",children:"â† Back"})})}),e.jsx(Ae,{story:a}),e.jsxs("div",{className:"story-detail__comments-section",children:[e.jsxs("div",{className:"story-detail__comments-header",children:[e.jsxs("h2",{className:"story-detail__comments-title",children:[a.commentCount," ",a.commentCount===1?"Comment":"Comments"]}),l&&e.jsx(g,{variant:"secondary",size:"small",onClick:h,children:"Retry Loading Comments"})]}),l?e.jsx(C,{message:"Failed to load comments",onRetry:h}):c?e.jsx("div",{className:"story-detail__comments-loading",children:e.jsx(Y,{message:"Loading comments..."})}):o&&o.ids.length>0?e.jsx(ie,{commentIds:o.ids}):e.jsx("div",{className:"story-detail__no-comments",children:e.jsx("p",{children:"No comments yet. Be the first to comment!"})})]})]})};var y=(s=>(s.SCORE="SCORE",s.RECENT="RECENT",s.COMMENTS="COMMENTS",s))(y||{});const Ve=({formState:s,updateField:t,onSearch:a,onReset:n,loading:r})=>{const i=o=>{o.preventDefault(),a()};return e.jsxs("form",{className:"search-form",onSubmit:i,children:[e.jsx("div",{className:"search-form__header",children:e.jsx("h2",{children:"Search"})}),e.jsxs("div",{className:"search-form__field",children:[e.jsx("label",{htmlFor:"search-query",className:"search-form__label",children:"Search Query"}),e.jsx("input",{id:"search-query",type:"text",className:"search-form__input",placeholder:"Enter keywords...",value:s.query,onChange:o=>t("query",o.target.value),disabled:r}),e.jsx("span",{className:"search-form__hint",children:"Search in titles and content"})]}),e.jsxs("div",{className:"search-form__field",children:[e.jsx("label",{htmlFor:"search-author",className:"search-form__label",children:"Author"}),e.jsx("input",{id:"search-author",type:"text",className:"search-form__input",placeholder:"Username...",value:s.author,onChange:o=>t("author",o.target.value),disabled:r})]}),e.jsxs("div",{className:"search-form__field",children:[e.jsx("label",{htmlFor:"search-min-score",className:"search-form__label",children:"Minimum Score"}),e.jsx("input",{id:"search-min-score",type:"number",className:"search-form__input",placeholder:"0",min:"0",value:s.minScore??"",onChange:o=>t("minScore",o.target.value?parseInt(o.target.value,10):void 0),disabled:r})]}),e.jsxs("div",{className:"search-form__field",children:[e.jsx("label",{htmlFor:"search-sort",className:"search-form__label",children:"Sort By"}),e.jsxs("select",{id:"search-sort",className:"search-form__select",value:s.sortOrder,onChange:o=>t("sortOrder",o.target.value),disabled:r,children:[e.jsx("option",{value:y.SCORE,children:"Highest Score"}),e.jsx("option",{value:y.RECENT,children:"Most Recent"}),e.jsx("option",{value:y.COMMENTS,children:"Most Comments"})]})]}),e.jsxs("div",{className:"search-form__actions",children:[e.jsx(g,{type:"submit",variant:"primary",fullWidth:!0,loading:r,disabled:r,children:"Search"}),e.jsx(g,{type:"button",variant:"secondary",fullWidth:!0,onClick:n,disabled:r,children:"Reset"})]})]})},Ze=({formState:s,updateField:t,onApply:a})=>{const[n,r]=d.useState(""),[i,o]=d.useState(""),c=()=>{n.trim()&&!s.tags.includes(n.trim())&&(t("tags",[...s.tags,n.trim()]),r(""))},l=u=>{t("tags",s.tags.filter(p=>p!==u))},h=()=>{i.trim()&&!s.topics.includes(i.trim())&&(t("topics",[...s.topics,i.trim()]),o(""))},m=u=>{t("topics",s.topics.filter(p=>p!==u))},f=(u,p)=>{u.key==="Enter"&&(u.preventDefault(),p())};return e.jsxs("div",{className:"search-filters",children:[e.jsx("div",{className:"search-filters__header",children:e.jsx("h2",{children:"Advanced Filters"})}),e.jsxs("div",{className:"search-filters__section",children:[e.jsx("label",{className:"search-filters__label",children:"Tags"}),e.jsxs("div",{className:"search-filters__input-group",children:[e.jsx("input",{type:"text",className:"search-filters__input",placeholder:"Add tag...",value:n,onChange:u=>r(u.target.value),onKeyPress:u=>f(u,c)}),e.jsx(g,{variant:"secondary",size:"small",onClick:c,disabled:!n.trim(),children:"Add"})]}),s.tags.length>0&&e.jsx("div",{className:"search-filters__chips",children:s.tags.map(u=>e.jsxs("span",{className:"search-filters__chip",children:[u,e.jsx("button",{type:"button",className:"search-filters__chip-remove",onClick:()=>l(u),"aria-label":`Remove ${u}`,children:"Ã—"})]},u))})]}),e.jsxs("div",{className:"search-filters__section",children:[e.jsx("label",{className:"search-filters__label",children:"Topics"}),e.jsxs("div",{className:"search-filters__input-group",children:[e.jsx("input",{type:"text",className:"search-filters__input",placeholder:"Add topic...",value:i,onChange:u=>o(u.target.value),onKeyPress:u=>f(u,h)}),e.jsx(g,{variant:"secondary",size:"small",onClick:h,disabled:!i.trim(),children:"Add"})]}),s.topics.length>0&&e.jsx("div",{className:"search-filters__chips",children:s.topics.map(u=>e.jsxs("span",{className:"search-filters__chip",children:[u,e.jsx("button",{type:"button",className:"search-filters__chip-remove",onClick:()=>m(u),"aria-label":`Remove ${u}`,children:"Ã—"})]},u))})]}),e.jsxs("div",{className:"search-filters__section",children:[e.jsx("label",{htmlFor:"filter-location",className:"search-filters__label",children:"Location"}),e.jsx("input",{id:"filter-location",type:"text",className:"search-filters__input",placeholder:"City, State or Country...",value:s.location,onChange:u=>t("location",u.target.value)})]}),e.jsxs("div",{className:"search-filters__section",children:[e.jsx("label",{htmlFor:"filter-after",className:"search-filters__label",children:"After Date"}),e.jsx("input",{id:"filter-after",type:"date",className:"search-filters__input",value:s.after,onChange:u=>t("after",u.target.value)})]}),e.jsxs("div",{className:"search-filters__section",children:[e.jsx("label",{htmlFor:"filter-before",className:"search-filters__label",children:"Before Date"}),e.jsx("input",{id:"filter-before",type:"date",className:"search-filters__input",value:s.before,onChange:u=>t("before",u.target.value)})]}),e.jsx("div",{className:"search-filters__actions",children:e.jsx(g,{variant:"primary",fullWidth:!0,onClick:a,children:"Apply Filters"})})]})},Ye=({results:s,loading:t,error:a,sortOrder:n,onSortChange:r,onPageChange:i,onRetry:o})=>{if(t&&!s)return e.jsx("div",{className:"search-results",children:e.jsx(w,{size:"large",text:"Searching..."})});if(a)return e.jsx("div",{className:"search-results",children:e.jsx(C,{message:a.message||"Search failed",onRetry:o})});if(!s)return e.jsx("div",{className:"search-results",children:e.jsx(D,{message:"Enter search criteria to find stories",icon:"ðŸ”"})});const c=Math.ceil(s.totalCount/s.pageSize);return e.jsxs("div",{className:"search-results",children:[e.jsxs("div",{className:"search-results__header",children:[e.jsxs("div",{className:"search-results__info",children:[e.jsxs("h2",{className:"search-results__title",children:[s.totalCount," ",s.totalCount===1?"result":"results"," found"]}),s.totalCount>0&&e.jsxs("p",{className:"search-results__subtitle",children:["Showing ",(s.page-1)*s.pageSize+1," - ",Math.min(s.page*s.pageSize,s.totalCount)," of ",s.totalCount]})]}),s.totalCount>0&&e.jsxs("div",{className:"search-results__sort",children:[e.jsx("label",{htmlFor:"results-sort",className:"search-results__sort-label",children:"Sort by:"}),e.jsxs("select",{id:"results-sort",className:"search-results__sort-select",value:n,onChange:l=>r(l.target.value),children:[e.jsx("option",{value:y.SCORE,children:"Highest Score"}),e.jsx("option",{value:y.RECENT,children:"Most Recent"}),e.jsx("option",{value:y.COMMENTS,children:"Most Comments"})]})]})]}),s.ids.length===0?e.jsx(D,{message:"No stories match your search criteria",icon:"ðŸ“­"}):e.jsx(U,{storyIds:s.ids,currentPage:s.page,totalPages:c,hasMore:s.hasMore,onPageChange:i,loading:t,emptyMessage:"No stories found"})]})},Ge=(s=300)=>{const[t,a]=d.useState(null),[n,r]=d.useState(!1),[i,o]=d.useState(null),c=d.useRef(null),l=d.useCallback(async m=>{c.current&&clearTimeout(c.current),c.current=setTimeout(async()=>{try{r(!0),o(null);const f=await E.searchStories(m);a(f)}catch(f){o(f instanceof Error?f:new Error("Search failed"))}finally{r(!1)}},s)},[s]),h=d.useCallback(()=>{a(null),o(null)},[]);return d.useEffect(()=>()=>{c.current&&clearTimeout(c.current)},[]),{results:t,loading:n,error:i,search:l,clearResults:h}},G={query:"",tags:[],topics:[],location:"",author:"",minScore:void 0,after:"",before:"",sortOrder:y.SCORE,page:1,pageSize:5},Je=()=>{const[s,t]=d.useState(G),a=d.useCallback((i,o)=>{t(c=>({...c,[i]:o}))},[]),n=d.useCallback(()=>{t(G)},[]),r=d.useCallback(()=>({query:s.query||void 0,tags:s.tags.length>0?s.tags:void 0,topics:s.topics.length>0?s.topics:void 0,location:s.location||void 0,author:s.author||void 0,minScore:s.minScore,after:s.after||void 0,before:s.before||void 0,sortOrder:s.sortOrder,page:s.page,pageSize:s.pageSize}),[s]);return{formState:s,updateField:a,resetForm:n,toSearchRequest:r}},Ke=()=>{const[s,t]=ue(),{results:a,loading:n,error:r,search:i,clearResults:o}=Ge(),{formState:c,updateField:l,resetForm:h,toSearchRequest:m}=Je();d.useEffect(()=>{const _=s.get("q"),x=s.get("tags"),T=s.get("topics"),k=s.get("author"),L=s.get("location"),R=s.get("minScore"),P=s.get("sort"),M=s.get("page");_&&l("query",_),x&&l("tags",x.split(",")),T&&l("topics",T.split(",")),k&&l("author",k),L&&l("location",L),R&&l("minScore",parseInt(R,10)),P&&l("sortOrder",P),M&&l("page",parseInt(M,10)),(_||x||T||k||L||R)&&f()},[]);const f=async()=>{const _=m();await i(_);const x=new URLSearchParams;c.query&&x.set("q",c.query),c.tags.length>0&&x.set("tags",c.tags.join(",")),c.topics.length>0&&x.set("topics",c.topics.join(",")),c.author&&x.set("author",c.author),c.location&&x.set("location",c.location),c.minScore&&x.set("minScore",c.minScore.toString()),c.sortOrder!==y.SCORE&&x.set("sort",c.sortOrder),c.page>1&&x.set("page",c.page.toString()),t(x)},u=()=>{h(),o(),t({})},p=_=>{l("page",_),setTimeout(()=>f(),0)},j=_=>{l("sortOrder",_),l("page",1),setTimeout(()=>f(),0)};return e.jsxs("div",{className:"search-page",children:[e.jsxs("div",{className:"search-page__header",children:[e.jsx("h1",{children:"Search Stories"}),e.jsx("p",{className:"search-page__subtitle",children:"Find stories using advanced filters and search criteria"})]}),e.jsxs("div",{className:"search-page__content",children:[e.jsxs("aside",{className:"search-page__sidebar",children:[e.jsx(Ve,{formState:c,updateField:(_,x)=>l(_,x),onSearch:f,onReset:u,loading:n}),e.jsx(Ze,{formState:c,updateField:(_,x)=>l(_,x),onApply:f})]}),e.jsx("main",{className:"search-page__main",children:e.jsx(Ye,{results:a,loading:n,error:r,sortOrder:c.sortOrder,onSortChange:j,onPageChange:p,onRetry:f})})]})]})},q={async getUserByUsername(s){return v.get(N.USER_DETAIL(s))},async getUser(s){return this.getUserByUsername(s)},async getUserStories(s,t){return v.get(N.USER_STORIES(s),t)},async getUserComments(s,t){return v.get(N.USER_COMMENTS(s),t)},async getUsersByUsernames(s){const t=s.map(n=>this.getUserByUsername(n));return(await Promise.allSettled(t)).filter(n=>n.status==="fulfilled").map(n=>n.value)},async userExists(s){try{return await this.getUserByUsername(s),!0}catch{return!1}}},Qe=s=>{const[t,a]=d.useState(null),[n,r]=d.useState(!0),[i,o]=d.useState(null),c=d.useCallback(async()=>{if(!s){r(!1);return}try{r(!0),o(null);const l=await q.getUserByUsername(s);a(l)}catch(l){o(l instanceof Error?l:new Error("Failed to fetch user"))}finally{r(!1)}},[s]);return d.useEffect(()=>{c()},[c]),{data:t,loading:n,error:i,refetch:c}},Xe=(s,t=1,a=5)=>{const[n,r]=d.useState(null),[i,o]=d.useState(!0),[c,l]=d.useState(null),h=d.useCallback(async()=>{if(!s){o(!1);return}try{o(!0),l(null);const m=await q.getUserStories(s,{page:t,pageSize:a});r(m)}catch(m){l(m instanceof Error?m:new Error("Failed to fetch user stories"))}finally{o(!1)}},[s,t,a]);return d.useEffect(()=>{h()},[h]),{data:n,loading:i,error:c,refetch:h}},es=(s,t=1,a=5)=>{const[n,r]=d.useState(null),[i,o]=d.useState(!0),[c,l]=d.useState(null),h=d.useCallback(async()=>{if(!s){o(!1);return}try{o(!0),l(null);const m=await q.getUserComments(s,{page:t,pageSize:a});r(m)}catch(m){l(m instanceof Error?m:new Error("Failed to fetch user comments"))}finally{o(!1)}},[s,t,a]);return d.useEffect(()=>{h()},[h]),{data:n,loading:i,error:c,refetch:h}},ss=({user:s})=>e.jsxs("div",{className:"user-info",children:[e.jsxs("div",{className:"user-info__header",children:[e.jsx("h1",{className:"user-info__username",children:s.id}),e.jsx("div",{className:"user-info__meta",children:e.jsxs("span",{className:"user-info__joined",children:["Joined ",Ie(s.created)]})})]}),s.about&&e.jsx("div",{className:"user-info__about",children:e.jsx("p",{children:s.about})}),s.location&&e.jsxs("div",{className:"user-info__location",children:[e.jsx("svg",{className:"user-info__location-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 0C5.24 0 3 2.24 3 5C3 8.5 8 14 8 14C8 14 13 8.5 13 5C13 2.24 10.76 0 8 0ZM8 6.5C7.17 6.5 6.5 5.83 6.5 5C6.5 4.17 7.17 3.5 8 3.5C8.83 3.5 9.5 4.17 9.5 5C9.5 5.83 8.83 6.5 8 6.5Z",fill:"currentColor"})}),e.jsx("span",{children:s.location})]}),s.topics.length>0&&e.jsxs("div",{className:"user-info__topics",children:[e.jsx("h3",{className:"user-info__section-title",children:"Interests"}),e.jsx("div",{className:"user-info__badges",children:s.topics.map(t=>e.jsx(b,{variant:"secondary",size:"small",children:t},t))})]}),s.tags.length>0&&e.jsxs("div",{className:"user-info__tags",children:[e.jsx("h3",{className:"user-info__section-title",children:"Tags"}),e.jsx("div",{className:"user-info__badges",children:s.tags.map(t=>e.jsx(b,{variant:"outline",size:"small",children:t},t))})]})]}),ts=({children:s,className:t="",variant:a="default",padding:n="medium",hoverable:r=!1,onClick:i})=>{const o=["card",`card--${a}`,`card--padding-${n}`,r&&"card--hoverable",i&&"card--clickable",t].filter(Boolean).join(" "),c=i?"button":"div";return e.jsx(c,{className:o,onClick:i,type:i?"button":void 0,children:s})},rs=({user:s})=>{const t=[{label:"Karma",value:s.karma.toLocaleString(),icon:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:"currentColor"})})},{label:"Submissions",value:s.submittedIds.length.toLocaleString(),icon:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14 17H7V15H14V17ZM17 13H7V11H17V13ZM17 9H7V7H17V9Z",fill:"currentColor"})})}];return e.jsx("div",{className:"user-stats",children:t.map(a=>e.jsxs(ts,{className:"user-stats__card",children:[e.jsx("div",{className:"user-stats__icon",children:a.icon}),e.jsxs("div",{className:"user-stats__content",children:[e.jsx("div",{className:"user-stats__value",children:a.value}),e.jsx("div",{className:"user-stats__label",children:a.label})]})]},a.label))})},J=({type:s,data:t,loading:a,error:n,currentPage:r,onPageChange:i,onRetry:o})=>{if(a)return e.jsx(w,{size:"medium",text:`Loading ${s}...`});if(n)return e.jsx(C,{message:n.message||`Failed to load ${s}`,onRetry:o});if(!t||t.ids.length===0)return e.jsx(D,{message:s==="stories"?"No stories submitted yet":"No comments posted yet"});const c=Math.ceil(t.totalCount/t.pageSize);return e.jsx("div",{className:"user-activity",children:s==="stories"?e.jsx(U,{storyIds:t.ids,currentPage:r,totalPages:c,hasMore:t.hasMore,onPageChange:i,emptyMessage:"No stories found"}):e.jsx(ie,{commentIds:t.ids,currentPage:r,totalPages:c,hasMore:t.hasMore,onPageChange:i,showParentContext:!0})})},as=()=>{const{username:s}=ee(),t=Q(),[a,n]=d.useState("stories"),{data:r,loading:i,error:o,refetch:c}=Qe(s||null),{page:l,pageSize:h,goToPage:m}=$(),{page:f,pageSize:u,goToPage:p}=$(),{data:j,loading:_,error:x,refetch:T}=Xe(s||null,l,h),{data:k,loading:L,error:R,refetch:P}=es(s||null,f,u);if(i)return e.jsx(w,{size:"large",text:"Loading user profile..."});if(o)return e.jsx("div",{className:"user-profile-error",children:e.jsx(C,{message:o.message||"Failed to load user profile",onRetry:c})});if(!r)return e.jsx("div",{className:"user-profile-error",children:e.jsx(C,{message:"User not found",onRetry:()=>t("/"),retryText:"Go Home"})});const M=W=>{n(W),W==="stories"?m(1):p(1)};return e.jsxs("div",{className:"user-profile",children:[e.jsxs("div",{className:"user-profile__header",children:[e.jsx(ss,{user:r}),e.jsx(rs,{user:r})]}),e.jsxs("div",{className:"user-profile__activity",children:[e.jsxs("div",{className:"user-profile__tabs",children:[e.jsxs("button",{className:`user-profile__tab ${a==="stories"?"user-profile__tab--active":""}`,onClick:()=>M("stories"),children:["Stories (",r.submittedIds.length,")"]}),e.jsx("button",{className:`user-profile__tab ${a==="comments"?"user-profile__tab--active":""}`,onClick:()=>M("comments"),children:"Comments"})]}),e.jsxs("div",{className:"user-profile__content",children:[a==="stories"&&e.jsx(J,{type:"stories",data:j,loading:_,error:x,currentPage:l,onPageChange:m,onRetry:T}),a==="comments"&&e.jsx(J,{type:"comments",data:k,loading:L,error:R,currentPage:f,onPageChange:p,onRetry:P})]})]})]})},K=()=>e.jsx("div",{className:"not-found",children:e.jsxs("div",{className:"not-found__content",children:[e.jsx("div",{className:"not-found__icon",children:e.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{d:"M40 50C40 47.7909 41.7909 46 44 46H46C48.2091 46 50 47.7909 50 50V52C50 54.2091 48.2091 56 46 56H44C41.7909 56 40 54.2091 40 52V50Z",fill:"currentColor"}),e.jsx("path",{d:"M70 50C70 47.7909 71.7909 46 74 46H76C78.2091 46 80 47.7909 80 50V52C80 54.2091 78.2091 56 76 56H74C71.7909 56 70 54.2091 70 52V50Z",fill:"currentColor"}),e.jsx("path",{d:"M40 75C40 75 45 70 60 70C75 70 80 75 80 75",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})]})}),e.jsx("h1",{className:"not-found__title",children:"404"}),e.jsx("h2",{className:"not-found__subtitle",children:"Page Not Found"}),e.jsx("p",{className:"not-found__message",children:"Sorry, the page you're looking for doesn't exist or has been moved."}),e.jsxs("div",{className:"not-found__actions",children:[e.jsx(S,{to:"/",children:e.jsx(g,{variant:"primary",size:"large",children:"Go to Home"})}),e.jsx(g,{variant:"secondary",size:"large",onClick:()=>window.history.back(),children:"Go Back"})]})]})}),ns=fe([{path:"/",element:e.jsx(be,{}),errorElement:e.jsx(K,{}),children:[{index:!0,element:e.jsx(Be,{})},{path:"new",element:e.jsx(Ue,{})},{path:"story/:id",element:e.jsx(We,{})},{path:"search",element:e.jsx(Ke,{})},{path:"user/:username",element:e.jsx(as,{})},{path:"404",element:e.jsx(K,{})},{path:"*",element:e.jsx(_e,{to:"/404",replace:!0})}]}]),I={HOME:"/",NEW:"/new",SEARCH:"/search"};class os extends d.Component{constructor(a){super(a);V(this,"handleReset",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,n){console.error("ErrorBoundary caught an error:",a,n),this.props.onError&&this.props.onError(a,n)}render(){var a;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx(C,{title:"Application Error",message:((a=this.state.error)==null?void 0:a.message)||"An unexpected error occurred. Please try refreshing the page.",onRetry:this.handleReset,variant:"page"}):this.props.children}}function is(){return e.jsx(os,{children:e.jsx(xe,{router:ns})})}const le=document.getElementById("root");if(!le)throw new Error("Failed to find the root element");z.createRoot(le).render(e.jsx(X.StrictMode,{children:e.jsx(is,{})}));
//# sourceMappingURL=index-D31AyYBh.js.map
